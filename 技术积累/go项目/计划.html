<!DOCTYPE html>
<html lang="en" dir="ltr"><head><title>计划</title><meta charset="utf-8"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto Sans SC:wght@400;700&amp;family=Noto Serif SC:ital,wght@0,400;0,500;0,700;0,900;1,400;1,500;1,700;1,900&amp;family=JetBrains Mono:wght@400;600&amp;display=swap"/><link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin="anonymous"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="og:site_name" content="ING wiki"/><meta property="og:title" content="计划"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="计划"/><meta name="twitter:description" content="📅 第一阶段：核心功能速成 (1月2日 - 1月4日) 目标： 写出“最小可行性产品” (MVP)。 验收标准： 用 Postman 发一个长链接，能返回短链接；在浏览器输入短链接，能跳转到原网页。 Day 1 (今晚 1月2日)：打通血管 (Config &amp; Base) 今晚别太累，把最枯燥的配置搞定，让程序能连上数据库。 任务 1：填写配置文件 位置： conf/config.toml (或 .ini) 动作： 把你刚才的 MySQL 和 Redis 账号密码填进去。 任务 2：初始化 MySQL 连接 位置： base/db/mysql.go 动作： 复制 GORM 的连接代码..."/><meta property="og:description" content="📅 第一阶段：核心功能速成 (1月2日 - 1月4日) 目标： 写出“最小可行性产品” (MVP)。 验收标准： 用 Postman 发一个长链接，能返回短链接；在浏览器输入短链接，能跳转到原网页。 Day 1 (今晚 1月2日)：打通血管 (Config &amp; Base) 今晚别太累，把最枯燥的配置搞定，让程序能连上数据库。 任务 1：填写配置文件 位置： conf/config.toml (或 .ini) 动作： 把你刚才的 MySQL 和 Redis 账号密码填进去。 任务 2：初始化 MySQL 连接 位置： base/db/mysql.go 动作： 复制 GORM 的连接代码..."/><meta property="og:image:alt" content="📅 第一阶段：核心功能速成 (1月2日 - 1月4日) 目标： 写出“最小可行性产品” (MVP)。 验收标准： 用 Postman 发一个长链接，能返回短链接；在浏览器输入短链接，能跳转到原网页。 Day 1 (今晚 1月2日)：打通血管 (Config &amp; Base) 今晚别太累，把最枯燥的配置搞定，让程序能连上数据库。 任务 1：填写配置文件 位置： conf/config.toml (或 .ini) 动作： 把你刚才的 MySQL 和 Redis 账号密码填进去。 任务 2：初始化 MySQL 连接 位置： base/db/mysql.go 动作： 复制 GORM 的连接代码..."/><meta property="twitter:domain" content="im0x0ing.github.io"/><meta property="og:url" content="https://im0x0ing.github.io/技术积累/go项目/计划"/><meta property="twitter:url" content="https://im0x0ing.github.io/技术积累/go项目/计划"/><link rel="icon" href="../../static/icon.png"/><meta name="description" content="📅 第一阶段：核心功能速成 (1月2日 - 1月4日) 目标： 写出“最小可行性产品” (MVP)。 验收标准： 用 Postman 发一个长链接，能返回短链接；在浏览器输入短链接，能跳转到原网页。 Day 1 (今晚 1月2日)：打通血管 (Config &amp; Base) 今晚别太累，把最枯燥的配置搞定，让程序能连上数据库。 任务 1：填写配置文件 位置： conf/config.toml (或 .ini) 动作： 把你刚才的 MySQL 和 Redis 账号密码填进去。 任务 2：初始化 MySQL 连接 位置： base/db/mysql.go 动作： 复制 GORM 的连接代码..."/><meta name="generator" content="Quartz"/><link href="../../index.css" rel="stylesheet" type="text/css" data-persist="true"/><style>.expand-button {
  position: absolute;
  display: flex;
  float: right;
  padding: 0.4rem;
  margin: 0.3rem;
  right: 0;
  color: var(--gray);
  border-color: var(--dark);
  background-color: var(--light);
  border: 1px solid;
  border-radius: 5px;
  opacity: 0;
  transition: 0.2s;
}
.expand-button > svg {
  fill: var(--light);
  filter: contrast(0.3);
}
.expand-button:hover {
  cursor: pointer;
  border-color: var(--secondary);
}
.expand-button:focus {
  outline: 0;
}

pre:hover > .expand-button {
  opacity: 1;
  transition: 0.2s;
}

#mermaid-container {
  position: fixed;
  contain: layout;
  z-index: 999;
  left: 0;
  top: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  display: none;
  backdrop-filter: blur(4px);
  background: rgba(0, 0, 0, 0.5);
}
#mermaid-container.active {
  display: inline-block;
}
#mermaid-container > #mermaid-space {
  border: 1px solid var(--lightgray);
  background-color: var(--light);
  border-radius: 5px;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  height: 80vh;
  width: 80vw;
  overflow: hidden;
}
#mermaid-container > #mermaid-space > .mermaid-content {
  padding: 2rem;
  position: relative;
  transform-origin: 0 0;
  transition: transform 0.1s ease;
  overflow: visible;
  min-height: 200px;
  min-width: 200px;
}
#mermaid-container > #mermaid-space > .mermaid-content pre {
  margin: 0;
  border: none;
}
#mermaid-container > #mermaid-space > .mermaid-content svg {
  max-width: none;
  height: auto;
}
#mermaid-container > #mermaid-space > .mermaid-controls {
  position: absolute;
  bottom: 20px;
  right: 20px;
  display: flex;
  gap: 8px;
  padding: 8px;
  background: var(--light);
  border: 1px solid var(--lightgray);
  border-radius: 6px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  z-index: 2;
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  padding: 0;
  border: 1px solid var(--lightgray);
  background: var(--light);
  color: var(--dark);
  border-radius: 4px;
  cursor: pointer;
  font-size: 16px;
  font-family: var(--bodyFont);
  transition: all 0.2s ease;
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:hover {
  background: var(--lightgray);
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:active {
  transform: translateY(1px);
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:nth-child(2) {
  width: auto;
  padding: 0 12px;
  font-size: 14px;
}
/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL2hvbWUvcnVubmVyL3dvcmsvaW0weDBpbmctYmxvZy1wcml2YXRlL2ltMHgwaW5nLWJsb2ctcHJpdmF0ZS9xdWFydHovY29tcG9uZW50cy9zdHlsZXMiLCJzb3VyY2VzIjpbIm1lcm1haWQuaW5saW5lLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBOztBQUdGO0VBQ0U7OztBQUtGO0VBQ0U7RUFDQTs7O0FBSUo7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7O0FBSUo7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFOztBQUdGO0VBQ0U7O0FBSUY7RUFDRTtFQUNBO0VBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyIuZXhwYW5kLWJ1dHRvbiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxvYXQ6IHJpZ2h0O1xuICBwYWRkaW5nOiAwLjRyZW07XG4gIG1hcmdpbjogMC4zcmVtO1xuICByaWdodDogMDsgLy8gTk9URTogcmlnaHQgd2lsbCBiZSBzZXQgaW4gbWVybWFpZC5pbmxpbmUudHNcbiAgY29sb3I6IHZhcigtLWdyYXkpO1xuICBib3JkZXItY29sb3I6IHZhcigtLWRhcmspO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1saWdodCk7XG4gIGJvcmRlcjogMXB4IHNvbGlkO1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIG9wYWNpdHk6IDA7XG4gIHRyYW5zaXRpb246IDAuMnM7XG5cbiAgJiA+IHN2ZyB7XG4gICAgZmlsbDogdmFyKC0tbGlnaHQpO1xuICAgIGZpbHRlcjogY29udHJhc3QoMC4zKTtcbiAgfVxuXG4gICY6aG92ZXIge1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLXNlY29uZGFyeSk7XG4gIH1cblxuICAmOmZvY3VzIHtcbiAgICBvdXRsaW5lOiAwO1xuICB9XG59XG5cbnByZSB7XG4gICY6aG92ZXIgPiAuZXhwYW5kLWJ1dHRvbiB7XG4gICAgb3BhY2l0eTogMTtcbiAgICB0cmFuc2l0aW9uOiAwLjJzO1xuICB9XG59XG5cbiNtZXJtYWlkLWNvbnRhaW5lciB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgY29udGFpbjogbGF5b3V0O1xuICB6LWluZGV4OiA5OTk7XG4gIGxlZnQ6IDA7XG4gIHRvcDogMDtcbiAgd2lkdGg6IDEwMHZ3O1xuICBoZWlnaHQ6IDEwMHZoO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICBkaXNwbGF5OiBub25lO1xuICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoNHB4KTtcbiAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjUpO1xuXG4gICYuYWN0aXZlIHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIH1cblxuICAmID4gI21lcm1haWQtc3BhY2Uge1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWxpZ2h0Z3JheSk7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbGlnaHQpO1xuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgdG9wOiA1MCU7XG4gICAgbGVmdDogNTAlO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICAgIGhlaWdodDogODB2aDtcbiAgICB3aWR0aDogODB2dztcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuXG4gICAgJiA+IC5tZXJtYWlkLWNvbnRlbnQge1xuICAgICAgcGFkZGluZzogMnJlbTtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIHRyYW5zZm9ybS1vcmlnaW46IDAgMDtcbiAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjFzIGVhc2U7XG4gICAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgICAgIG1pbi1oZWlnaHQ6IDIwMHB4O1xuICAgICAgbWluLXdpZHRoOiAyMDBweDtcblxuICAgICAgcHJlIHtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICB9XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIG1heC13aWR0aDogbm9uZTtcbiAgICAgICAgaGVpZ2h0OiBhdXRvO1xuICAgICAgfVxuICAgIH1cblxuICAgICYgPiAubWVybWFpZC1jb250cm9scyB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBib3R0b206IDIwcHg7XG4gICAgICByaWdodDogMjBweDtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBnYXA6IDhweDtcbiAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWxpZ2h0KTtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWxpZ2h0Z3JheSk7XG4gICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgei1pbmRleDogMjtcblxuICAgICAgLm1lcm1haWQtY29udHJvbC1idXR0b24ge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgd2lkdGg6IDMycHg7XG4gICAgICAgIGhlaWdodDogMzJweDtcbiAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tbGlnaHRncmF5KTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tbGlnaHQpO1xuICAgICAgICBjb2xvcjogdmFyKC0tZGFyayk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1ib2R5Rm9udCk7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG5cbiAgICAgICAgJjpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tbGlnaHRncmF5KTtcbiAgICAgICAgfVxuXG4gICAgICAgICY6YWN0aXZlIHtcbiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMXB4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFN0eWxlIHRoZSByZXNldCBidXR0b24gZGlmZmVyZW50bHlcbiAgICAgICAgJjpudGgtY2hpbGQoMikge1xuICAgICAgICAgIHdpZHRoOiBhdXRvO1xuICAgICAgICAgIHBhZGRpbmc6IDAgMTJweDtcbiAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ== */</style><link href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" rel="stylesheet" type="text/css" data-persist="true"/><script src="../../prescript.js" type="application/javascript" data-persist="true"></script><script type="application/javascript" data-persist="true">const fetchData = fetch("../../static/contentIndex.json").then(data => data.json())</script><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://im0x0ing.github.io/index.xml"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:image" content="https://im0x0ing.github.io/技术积累/go项目/计划-og-image.webp"/><meta property="og:image:url" content="https://im0x0ing.github.io/技术积累/go项目/计划-og-image.webp"/><meta name="twitter:image" content="https://im0x0ing.github.io/技术积累/go项目/计划-og-image.webp"/><meta property="og:image:type" content="image/.webp"/></head><body data-slug="技术积累/go项目/计划"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h2 class="page-title"><a href="../..">ING wiki</a></h2><div class="spacer mobile-only"></div><div class="flex-component" style="flex-direction: row; flex-wrap: nowrap; gap: 1rem;"><div style="flex-grow: 1; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><div class="search"><button class="search-button"><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title>Search</title><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg><p>Search</p></button><div class="search-container"><div class="search-space"><input autocomplete="off" class="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div class="search-layout" data-preview="true"></div></div></div></div></div><div style="flex-grow: 0; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><button class="darkmode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve" aria-label="Dark mode"><title>Dark mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve" aria-label="Light mode"><title>Light mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></button></div><div style="flex-grow: 0; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><button class="readermode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="readerIcon" fill="currentColor" stroke="currentColor" stroke-width="0.2" stroke-linecap="round" stroke-linejoin="round" width="64px" height="64px" viewBox="0 0 24 24" aria-label="Reader mode"><title>Reader mode</title><g transform="translate(-1.8, -1.8) scale(1.15, 1.2)"><path d="M8.9891247,2.5 C10.1384702,2.5 11.2209868,2.96705384 12.0049645,3.76669482 C12.7883914,2.96705384 13.8709081,2.5 15.0202536,2.5 L18.7549359,2.5 C19.1691495,2.5 19.5049359,2.83578644 19.5049359,3.25 L19.5046891,4.004 L21.2546891,4.00457396 C21.6343849,4.00457396 21.9481801,4.28672784 21.9978425,4.6528034 L22.0046891,4.75457396 L22.0046891,20.25 C22.0046891,20.6296958 21.7225353,20.943491 21.3564597,20.9931534 L21.2546891,21 L2.75468914,21 C2.37499337,21 2.06119817,20.7178461 2.01153575,20.3517706 L2.00468914,20.25 L2.00468914,4.75457396 C2.00468914,4.37487819 2.28684302,4.061083 2.65291858,4.01142057 L2.75468914,4.00457396 L4.50368914,4.004 L4.50444233,3.25 C4.50444233,2.87030423 4.78659621,2.55650904 5.15267177,2.50684662 L5.25444233,2.5 L8.9891247,2.5 Z M4.50368914,5.504 L3.50468914,5.504 L3.50468914,19.5 L10.9478955,19.4998273 C10.4513189,18.9207296 9.73864328,18.5588115 8.96709342,18.5065584 L8.77307039,18.5 L5.25444233,18.5 C4.87474657,18.5 4.56095137,18.2178461 4.51128895,17.8517706 L4.50444233,17.75 L4.50368914,5.504 Z M19.5049359,17.75 C19.5049359,18.1642136 19.1691495,18.5 18.7549359,18.5 L15.2363079,18.5 C14.3910149,18.5 13.5994408,18.8724714 13.0614828,19.4998273 L20.5046891,19.5 L20.5046891,5.504 L19.5046891,5.504 L19.5049359,17.75 Z M18.0059359,3.999 L15.0202536,4 L14.8259077,4.00692283 C13.9889509,4.06666544 13.2254227,4.50975805 12.7549359,5.212 L12.7549359,17.777 L12.7782651,17.7601316 C13.4923805,17.2719483 14.3447024,17 15.2363079,17 L18.0059359,16.999 L18.0056891,4.798 L18.0033792,4.75457396 L18.0056891,4.71 L18.0059359,3.999 Z M8.9891247,4 L6.00368914,3.999 L6.00599909,4.75457396 L6.00599909,4.75457396 L6.00368914,4.783 L6.00368914,16.999 L8.77307039,17 C9.57551536,17 10.3461406,17.2202781 11.0128313,17.6202194 L11.2536891,17.776 L11.2536891,5.211 C10.8200889,4.56369974 10.1361548,4.13636104 9.37521067,4.02745763 L9.18347055,4.00692283 L8.9891247,4 Z"></path></g></svg></button></div></div><div class="explorer" data-behavior="link" data-collapsed="collapsed" data-savestate="true" data-data-fns="{&quot;order&quot;:[&quot;filter&quot;,&quot;map&quot;,&quot;sort&quot;],&quot;sortFn&quot;:&quot;(a,b)=>!a.isFolder&amp;&amp;!b.isFolder||a.isFolder&amp;&amp;b.isFolder?a.displayName.localeCompare(b.displayName,void 0,{numeric:!0,sensitivity:\&quot;base\&quot;}):!a.isFolder&amp;&amp;b.isFolder?1:-1&quot;,&quot;filterFn&quot;:&quot;node=>node.slug===\&quot;\&quot;||node.slug.startsWith(\&quot;\\u6280\\u672F\\u79EF\\u7D2F\&quot;)&quot;,&quot;mapFn&quot;:&quot;node=>node&quot;}"><button type="button" class="explorer-toggle mobile-explorer hide-until-loaded" data-mobile="true" aria-controls="explorer-62"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide-menu"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button><button type="button" class="title-button explorer-toggle desktop-explorer" data-mobile="false" aria-expanded="true"><h2>Explorer</h2><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-62" class="explorer-content" aria-expanded="false" role="group"><ul class="explorer-ul overflow" id="list-1"><li class="overflow-end"></li></ul></div><template id="template-file"><li><a href="#"></a></li></template><template id="template-folder"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div><button class="folder-button"><span class="folder-title"></span></button></div></div><div class="folder-outer"><ul class="content"></ul></div></li></template></div></div><div class="center"><div class="page-header"><header><nav class="my-navbar "><div class="links"><a href="/课程笔记/">课程笔记</a><a href="/技术积累/">技术积累</a><a href="/工具使用/">工具使用</a><a href="/生活杂谈/">生活杂谈</a></div></nav></header><div class="popover-hint"><nav class="breadcrumb-container" aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="../../">Home</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../技术积累/">技术积累</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../技术积累/go项目/">go项目</a><p> ❯ </p></div><div class="breadcrumb-element"><a href>计划</a></div></nav><h1 class="article-title">计划</h1><p show-comma="true" class="content-meta"><time datetime="2026-01-02T19:51:00.000Z">Jan 02, 2026</time><span>11 min read</span></p></div></div><article class="popover-hint"><h3 id="-第一阶段核心功能速成-1月2日---1月4日">📅 第一阶段：核心功能速成 (1月2日 - 1月4日)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#-第一阶段核心功能速成-1月2日---1月4日" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>目标：</strong> 写出“最小可行性产品” (MVP)。 <strong>验收标准：</strong> 用 Postman 发一个长链接，能返回短链接；在浏览器输入短链接，能跳转到原网页。</p>
<h4 id="day-1-今晚-1月2日打通血管-config--base"><strong>Day 1 (今晚 1月2日)：打通血管 (Config &amp; Base)</strong><a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#day-1-今晚-1月2日打通血管-config--base" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>今晚别太累，把最枯燥的配置搞定，让程序能连上数据库。</p>
<ul>
<li>
<p><strong>任务 1：填写配置文件</strong></p>
<ul>
<li>
<p><strong>位置：</strong> <code>conf/config.toml</code> (或 .ini)</p>
</li>
<li>
<p><strong>动作：</strong> 把你刚才的 MySQL 和 Redis 账号密码填进去。</p>
</li>
</ul>
</li>
<li>
<p><strong>任务 2：初始化 MySQL 连接</strong></p>
<ul>
<li>
<p><strong>位置：</strong> <code>base/db/mysql.go</code></p>
</li>
<li>
<p><strong>动作：</strong> 复制 GORM 的连接代码，读取配置文件里的参数，赋值给全局变量 <code>var DB *gorm.DB</code>。</p>
</li>
</ul>
</li>
<li>
<p><strong>任务 3：初始化 Redis 连接</strong></p>
<ul>
<li>
<p><strong>位置：</strong> <code>base/db/redis.go</code></p>
</li>
<li>
<p><strong>动作：</strong> 复制 go-redis 的连接代码，赋值给全局变量 <code>var RDB *redis.Client</code>。</p>
</li>
</ul>
</li>
<li>
<p><strong>任务 4：在 main 中测试</strong></p>
<ul>
<li>
<p><strong>位置：</strong> <code>main.go</code></p>
</li>
<li>
<p><strong>动作：</strong> 调用 <code>db.InitMySQL()</code> 和 <code>db.InitRedis()</code>。如果不报错，打印“连接成功”，<strong>今晚收工！</strong></p>
</li>
</ul>
</li>
</ul>
<h4 id="day-2-1月3日-周六核心零件-model--logic"><strong>Day 2 (1月3日 周六)：核心零件 (Model &amp; Logic)</strong><a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#day-2-1月3日-周六核心零件-model--logic" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>这是写代码最关键的一天。我们要造“雪花ID”和“进制转换”这两个核心零件。</p>
<ul>
<li>
<p><strong>任务 1：搬运工具代码</strong></p>
<ul>
<li>
<p><strong>位置：</strong> <code>base/tool/base62.go</code></p>
</li>
<li>
<p><strong>动作：</strong> 把 10进制转 62进制 的算法代码（找我要或网上搜）复制进去。写个 <code>_test.go</code> 测一下。</p>
</li>
</ul>
</li>
<li>
<p><strong>任务 2：接入雪花算法</strong></p>
<ul>
<li>
<p><strong>位置：</strong> <code>model/sequence/snowflake.go</code></p>
</li>
<li>
<p><strong>动作：</strong> 引入 <code>bwmarrin/snowflake</code> 包，写一个单例模式的 <code>GetID()</code> 函数。</p>
</li>
</ul>
</li>
<li>
<p><strong>任务 3：定义数据库模型</strong></p>
<ul>
<li>
<p><strong>位置：</strong> <code>model/short_url/model.go</code></p>
</li>
<li>
<p><strong>动作：</strong> 把 <code>struct Link {...}</code> 写好（就是我们刚才定义的表结构）。</p>
</li>
</ul>
</li>
<li>
<p><strong>任务 4：写“存”的逻辑 (Service层)</strong></p>
<ul>
<li>
<p><strong>位置：</strong> <code>model/short_url/service.go</code></p>
</li>
<li>
<p><strong>动作：</strong> 写一个 <code>Create</code> 函数。</p>
</li>
<li>
<p><strong>逻辑流：</strong></p>
<ol>
<li>
<p>调用 <code>snowflake.GetID()</code> 拿到 ID。</p>
</li>
<li>
<p>调用 <code>base62.Encode(id)</code> 拿到短码 <code>code</code>。</p>
</li>
<li>
<p>拼装 <code>Link</code> 对象。</p>
</li>
<li>
<p><code>db.DB.Create(&amp;link)</code> 存入 MySQL。</p>
</li>
<li>
<p>(可选) <code>db.RDB.Set(...)</code> 顺手存入 Redis。</p>
</li>
</ol>
</li>
</ul>
</li>
</ul>
<h4 id="day-3-1月4日-周日对外营业-controller--server"><strong>Day 3 (1月4日 周日)：对外营业 (Controller &amp; Server)</strong><a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#day-3-1月4日-周日对外营业-controller--server" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>要把里面的逻辑暴露给外面用了。</p>
<ul>
<li>
<p><strong>任务 1：写接口处理函数</strong></p>
<ul>
<li>
<p><strong>位置：</strong> <code>controller/handler.go</code></p>
</li>
<li>
<p><strong>动作：</strong></p>
<ul>
<li>
<p><code>func Create(...)</code>: 解析 JSON <span>→</span> 调 Service <span>→</span> 返回 JSON。</p>
</li>
<li>
<p><code>func Redirect(...)</code>: 解析 URL 短码 <span>→</span> 查 Redis/MySQL <span>→</span> <code>c.Redirect(301, longUrl)</code>。</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>任务 2：配置路由</strong></p>
<ul>
<li>
<p><strong>位置：</strong> <code>server/router.go</code></p>
</li>
<li>
<p><strong>动作：</strong> <code>r.POST(&quot;/api/create&quot;, controller.Create)</code> 和 <code>r.GET(&quot;/:code&quot;, controller.Redirect)</code>。</p>
</li>
</ul>
</li>
<li>
<p><strong>任务 3：最终测试</strong></p>
<ul>
<li><strong>动作：</strong> <code>go run main.go</code>。打开浏览器测一下。<strong>只要能跳转，MVP 宣告成功！</strong></li>
</ul>
</li>
</ul>
<hr/>
<h3 id="-第二阶段强制熔断--简历投递-1月5日---1月12日">🛑 第二阶段：强制熔断 &amp; 简历投递 (1月5日 - 1月12日)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#-第二阶段强制熔断--简历投递-1月5日---1月12日" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>目标：</strong> 考试求稳，简历投递。</p>
<ul>
<li>
<p><strong>1月5日 - 1月11日：</strong></p>
<ul>
<li>
<p><strong>完全停止写代码！</strong> 全力复习期末考。</p>
</li>
<li>
<p>你的项目现在虽然只有基础功能（没有布隆过滤器、没有 SingleFlight），但<strong>它能跑</strong>。这就足够让你安心考试了。</p>
</li>
</ul>
</li>
<li>
<p><strong>1月12日 (投简历日)：</strong></p>
<ul>
<li>
<p>把写着“布隆过滤器、SingleFlight”的简历投出去。</p>
</li>
<li>
<p><strong>心理建设：</strong> 此时代码里还没有这两个功能，但别怕，面试官不会立马看你代码。你有 3-5 天的时间差。</p>
</li>
</ul>
</li>
</ul>
<hr/>
<h3 id="️-第三阶段补全简历牛皮-1月13日---1月16日">🛠️ 第三阶段：补全“简历牛皮” (1月13日 - 1月16日)<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#️-第三阶段补全简历牛皮-1月13日---1月16日" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>目标：</strong> 在面试前，把简历上吹过的牛实现出来。</p>
<ul>
<li>
<p><strong>利用复习间隙（每天 1-2 小时）：</strong></p>
<ul>
<li>
<p><strong>加布隆过滤器：</strong> 在 <code>Service</code> 层 <code>Create</code> 时写入布隆，<code>Redirect</code> 时先查布隆。</p>
</li>
<li>
<p><strong>加 SingleFlight：</strong> 在 <code>Service</code> 层查数据库的那一步，外面包一层 <code>sg.Do(...)</code>。</p>
</li>
</ul>
</li>
</ul>
<h2 id="具体">具体<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#具体" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h4 id="65-创建数据库连接basedbmysqlgo">6.5 创建数据库连接 base/db/mysql.go<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#65-创建数据库连接basedbmysqlgo" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>package db</p>
<p>import (</p>
<p>    “fmt”</p>
<p>    “short_url/base/config”</p>
<p>    _ “github.com/go-sql-driver/mysql”</p>
<p>    “github.com/go-xorm/xorm”</p>
<p>)</p>
<p>var mysqlDb *xorm.Engine</p>
<p>func initMySql() {</p>
<p>    cfg := config.GetMysqlConfig()</p>
<p>    // 构建连接字符串</p>
<p>    dataSourceName := fmt.Sprintf(“%s:%s@tcp(%s:%s)/%s?charset=utf8mb4”,</p>
<p>        cfg.GetName(),</p>
<p>        cfg.GetPass(),</p>
<p>        cfg.GetIP(),</p>
<p>        cfg.GetPort(),</p>
<p>        cfg.GetDb(),</p>
<p>    )</p>
<p>    var err error</p>
<p>    mysqlDb, err = xorm.NewEngine(“mysql”, dataSourceName)</p>
<p>    if err != nil {</p>
<p>        panic(err)</p>
<p>    }</p>
<p>    // 设置连接池</p>
<p>    mysqlDb.SetMaxIdleConns(cfg.GetMaxIdle())</p>
<p>    mysqlDb.SetMaxOpenConns(cfg.GetMaxOpen())</p>
<p>    // 测试连接</p>
<p>    err = mysqlDb.Ping()</p>
<p>    if err != nil {</p>
<p>        panic(err)</p>
<p>    }</p>
<p>}</p>
<p>func GetMySqlDb() *xorm.Engine {</p>
<p>    return mysqlDb</p>
<p>}</p>
<h4 id="66-创建redis连接basedbredisgo">6.6 创建Redis连接 base/db/redis.go<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#66-创建redis连接basedbredisgo" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>package db</p>
<p>import (</p>
<p>    “fmt”</p>
<p>    “short_url/base/config”</p>
<p>    “github.com/go-redis/redis”</p>
<p>)</p>
<p>var redisDb *redis.Client</p>
<p>func initRedis() {</p>
<p>    cfg := config.GetRedisConfig()</p>
<p>    redisDb = redis.NewClient(&amp;redis.Options{</p>
<p>        Addr:     fmt.Sprintf(“%s:%s”, cfg.GetIP(), cfg.GetPort()),</p>
<p>        Password: cfg.GetPass(),</p>
<p>        DB:       0,</p>
<p>        PoolSize: cfg.GetMaxOpen(),</p>
<p>    })</p>
<p>    // 测试连接</p>
<p>    _, err := redisDb.Ping().Result()</p>
<p>    if err != nil {</p>
<p>        panic(err)</p>
<p>    }</p>
<p>}</p>
<p>func GetRedisDb() *redis.Client {</p>
<p>    return redisDb</p>
<p>}</p>
<h4 id="67-数据库初始化入口basedbdbgo">6.7 数据库初始化入口 base/db/db.go<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#67-数据库初始化入口basedbdbgo" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>package db</p>
<p>func Init() {</p>
<p>    initMySql()</p>
<p>    initRedis()</p>
<p>}</p>
<h4 id="68-创建进制转换工具basetoolten_to_anygo">6.8 创建进制转换工具 base/tool/ten_to_any.go<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#68-创建进制转换工具basetoolten_to_anygo" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>这是核心算法！把数字ID（1,2,3…）转换成短码（a,b,c…）</p>
<p>package tool</p>
<p>import (</p>
<p>    “math”</p>
<p>    “strconv”</p>
<p>    “strings”</p>
<p>)</p>
<p>// 62进制字符映射表（0-9, a-z, A-Z）</p>
<p>var tenToAnyMap = map<span class="orange-comment">[int]</span>string{</p>
<p>    0: “0”, 1: “1”, 2: “2”, 3: “3”, 4: “4”,</p>
<p>    5: “5”, 6: “6”, 7: “7”, 8: “8”, 9: “9”,</p>
<p>    10: “a”, 11: “b”, 12: “c”, 13: “d”, 14: “e”,</p>
<p>    15: “f”, 16: “g”, 17: “h”, 18: “i”, 19: “j”,</p>
<p>    20: “k”, 21: “l”, 22: “m”, 23: “n”, 24: “o”,</p>
<p>    25: “p”, 26: “q”, 27: “r”, 28: “s”, 29: “t”,</p>
<p>    30: “u”, 31: “v”, 32: “w”, 33: “x”, 34: “y”,</p>
<p>    35: “z”, 36: “A”, 37: “B”, 38: “C”, 39: “D”,</p>
<p>    40: “E”, 41: “F”, 42: “G”, 43: “H”, 44: “I”,</p>
<p>    45: “J”, 46: “K”, 47: “L”, 48: “M”, 49: “N”,</p>
<p>    50: “O”, 51: “P”, 52: “Q”, 53: “R”, 54: “S”,</p>
<p>    55: “T”, 56: “U”, 57: “V”, 58: “W”, 59: “X”,</p>
<p>    60: “Y”, 61: “Z”,</p>
<p>}</p>
<p>// 10进制转62进制（数字ID → 短码）</p>
<p>func TenToAny(num, n int) string {</p>
<p>    result := &quot;&quot;</p>
<p>    for num != 0 {</p>
<p>        remainder := num % n</p>
<p>        result = tenToAnyMap<span class="orange-comment">[remainder]</span> + result</p>
<p>        num = num / n</p>
<p>    }</p>
<p>    return result</p>
<p>}</p>
<p>// 62进制转10进制（短码 → 数字ID）</p>
<p>func AnyToTen(num string, n int) int {</p>
<p>    var result float64</p>
<p>    length := len(num) - 1</p>
<p>    for _, char := range num {</p>
<p>        value := findKeyInMap(string(char))</p>
<p>        if value != -1 {</p>
<p>            result += float64(value) * math.Pow(float64(n), float64(length))</p>
<p>            length—</p>
<p>        }</p>
<p>    }</p>
<p>    return int(result)</p>
<p>}</p>
<p>func findKeyInMap(in string) int {</p>
<p>    for k, v := range tenToAnyMap {</p>
<p>        if in == v {</p>
<p>            return k</p>
<p>        }</p>
<p>    }</p>
<p>    return -1</p>
<p>}</p>
<h4 id="69-创建日志工具basetoolloggo">6.9 创建日志工具 base/tool/log.go<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#69-创建日志工具basetoolloggo" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>package tool</p>
<p>import (</p>
<p>    “go.uber.org/zap”</p>
<p>)</p>
<p>var logger *zap.Logger</p>
<p>func initLog() {</p>
<p>    var err error</p>
<p>    logger, err = zap.NewProduction()</p>
<p>    if err != nil {</p>
<p>        panic(err)</p>
<p>    }</p>
<p>}</p>
<p>func GetLogger() *zap.Logger {</p>
<p>    return logger</p>
<p>}</p>
<h4 id="610-工具初始化basetooltoolgo">6.10 工具初始化 base/tool/tool.go<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#610-工具初始化basetooltoolgo" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>package tool</p>
<p>func Init() {</p>
<p>    initLog()</p>
<p>}</p>
<h4 id="611-基础层统一初始化basebasego">6.11 基础层统一初始化 base/base.go<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#611-基础层统一初始化basebasego" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>package base</p>
<p>import (</p>
<p>    “short_url/base/config”</p>
<p>    “short_url/base/db”</p>
<p>    “short_url/base/tool”</p>
<p>)</p>
<p>var ServerUrl string</p>
<p>func Init(path string) {</p>
<p>    config.Init(path)  // 1. 先读取配置</p>
<p>    tool.Init()        // 2. 初始化工具（日志等）</p>
<p>    db.Init()          // 3. 连接数据库</p>
<h3 id="步骤7数据模型层">步骤7：数据模型层<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#步骤7数据模型层" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<h4 id="71-创建links表模型modelshort_urllinksgo">7.1 创建Links表模型 model/short_url/links.go<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#71-创建links表模型modelshort_urllinksgo" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>package short_url</p>
<p>import (</p>
<p>    “time”</p>
<p>)</p>
<p>// Links 对应数据库的 links 表</p>
<p>type Links struct {</p>
<p>    Id         int    <code>xorm:&quot;pk autoincr 'id'&quot;</code>        // 主键，自增</p>
<p>    Url        string <code>xorm:&quot;varchar(200) 'url'&quot;</code>       // 长链接</p>
<p>    Keyword    string <code>xorm:&quot;varchar(50) 'keyword'&quot;</code>    // 短码</p>
<p>    Status     int    <code>xorm:&quot;tinyint 'status'&quot;</code>         // 1=系统生成，2=用户自定义</p>
<p>    CreateTime int64  <code>xorm:&quot;'create_time'&quot;</code>            // 创建时间</p>
<p>    UpdateTime int64  <code>xorm:&quot;'update_time'&quot;</code>            // 更新时间</p>
<p>}</p>
<p>// TableName 指定表名</p>
<p>func (Links) TableName() string {</p>
<p>    return “links”</p>
<p>}</p>
<p>// GetLinksByUrl 根据长链接查询短链接记录</p>
<p>func (s *service) GetLinksByUrl(url string) (*Links, error) {</p>
<p>    links := &amp;Links{}</p>
<p>    has, err := s.m.Where(“url = ?”, url).Get(links)</p>
<p>    if err != nil {</p>
<p>        return nil, err</p>
<p>    }</p>
<p>    if !has {</p>
<p>        return nil, nil</p>
<p>    }</p>
<p>    return links, nil</p>
<p>}</p>
<p>// GetLinksByKeyword 根据短码查询记录（用于跳转）</p>
<p>func (s *service) GetLinksByKeyword(keyword string) (*Links, error) {</p>
<p>    links := &amp;Links{}</p>
<p>    has, err := s.m.Where(“keyword = ?”, keyword).Get(links)</p>
<p>    if err != nil {</p>
<p>        return nil, err</p>
<p>    }</p>
<p>    if !has {</p>
<p>        return nil, nil</p>
<p>    }</p>
<p>    return links, nil</p>
<p>}</p>
<p>// CreateLinks 创建短链接（核心业务逻辑）</p>
<p>func (s *service) CreateLinks(url, key string, status int) (string, error) {</p>
<p>    var keyword string</p>
<p>    // 检查长链接是否已存在</p>
<p>    if links, err := s.GetLinksByUrl(url); err == nil &amp;&amp; links != nil {</p>
<p>        return “http://” + base.ServerUrl + ”/” + links.Keyword, nil</p>
<p>    }</p>
<p>    // 根据状态选择生成方式</p>
<p>    if status == 1 {</p>
<p>        // 系统自动生成：使用Redis自增ID + 62进制转换</p>
<p>        id, err := s.sequence.GetBorrowOrder()</p>
<p>        if err != nil {</p>
<p>            return &quot;&quot;, err</p>
<p>        }</p>
<p>        keyword = tool.TenToAny(int(id), 62) // 将数字ID转换为62进制短码</p>
<p>    } else if status == 2 {</p>
<p>        // 用户自定义短码</p>
<p>        keyword = key</p>
<p>        // 检查自定义短码是否已被使用</p>
<p>        if links, err := s.GetLinksByKeyword(keyword); err == nil &amp;&amp; links != nil {</p>
<p>            return &quot;&quot;, fmt.Errorf(“关键字已存在”)</p>
<p>        }</p>
<p>    }</p>
<p>    // 保存到数据库</p>
<p>    now := time.Now().Unix()</p>
<p>    links := &amp;Links{</p>
<p>        Url:        url,</p>
<p>        Keyword:    keyword,</p>
<p>        Status:     status,</p>
<p>        CreateTime: now,</p>
<p>        UpdateTime: now,</p>
<p>    }</p>
<p>    _, err := s.m.Insert(links)</p>
<p>    if err != nil {</p>
<p>        return &quot;&quot;, err</p>
<p>    }</p>
<p>    return “http://” + base.ServerUrl + ”/” + keyword, nil</p>
<p>}</p>
<p>但是我注意到代码中需要导入一些包，让我补充完整版本：</p>
<p>package short_url</p>
<p>import (</p>
<p>    “fmt”</p>
<p>    “short_url/base”</p>
<p>    “short_url/base/tool”</p>
<p>    “time”</p>
<p>)</p>
<h4 id="72-创建序列生成器modelsequencegeneratorgo">7.2 创建序列生成器 model/sequence/generator.go<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#72-创建序列生成器modelsequencegeneratorgo" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>这是生成唯一ID的核心！使用Redis的INCR命令保证全局唯一。</p>
<p>package sequence</p>
<p>import (</p>
<p>    “fmt”</p>
<p>)</p>
<p>const (</p>
<p>    // Redis中存储自增ID的key</p>
<p>    RedisKeySequence = “short_url:sequence”</p>
<p>)</p>
<p>// GetBorrowOrder 获取唯一的自增ID</p>
<p>func (s *service) GetBorrowOrder() (int64, error) {</p>
<p>    // 使用Redis的INCR命令，原子性自增</p>
<p>    result := s.r.Incr(RedisKeySequence)</p>
<p>    if result.Err() != nil {</p>
<p>        return 0, fmt.Errorf(“redis incr error: %v”, result.Err())</p>
<p>    }</p>
<p>    return result.Val(), nil</p>
<p>}</p>
<h4 id="73-模型层初始化modelmodelgo">7.3 模型层初始化 model/model.go<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#73-模型层初始化modelmodelgo" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>package model</p>
<p>import (</p>
<p>    “short_url/model/sequence”</p>
<p>    “short_url/model/short_url”</p>
<p>)</p>
<p>func Init() {</p>
<p>    sequence.Init()   // 初始化序列生成器</p>
<p>    short_url.Init()  // 初始化短链接服务</p>
<p>}</p>
<hr/>
<h3 id="步骤8控制器层">步骤8：控制器层<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#步骤8控制器层" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<h4 id="81-创建响应结构controllercodego">8.1 创建响应结构 controller/code.go<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#81-创建响应结构controllercodego" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>package controller</p>
<p>import (</p>
<p>    “net/http”</p>
<p>    “github.com/gin-gonic/gin”</p>
<p>)</p>
<p>// Response 统一响应结构</p>
<p>type Response struct {</p>
<p>    Code int         <code>json:&quot;code&quot;</code></p>
<p>    Msg  string      <code>json:&quot;msg&quot;</code></p>
<p>    Data interface{} <code>json:&quot;data&quot;</code></p>
<p>}</p>
<p>// Success 成功响应</p>
<p>func Success(c *gin.Context, data interface{}) {</p>
<p>    c.JSON(http.StatusOK, Response{</p>
<p>        Code: 200,</p>
<p>        Msg:  “success”,</p>
<p>        Data: data,</p>
<p>    })</p>
<p>}</p>
<p>// Error 错误响应</p>
<p>func Error(c *gin.Context, msg string) {</p>
<p>    c.JSON(http.StatusOK, Response{</p>
<p>        Code: 400,</p>
<p>        Msg:  msg,</p>
<p>        Data: nil,</p>
<p>    })</p>
<p>}</p>
<h4 id="82-创建短链接控制器controllersequencego">8.2 创建短链接控制器 controller/sequence.go<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#82-创建短链接控制器controllersequencego" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>package controller</p>
<p>import (</p>
<p>    “github.com/gin-gonic/gin”</p>
<p>)</p>
<p>// CreateLinkRequest 创建短链接的请求参数</p>
<p>type CreateLinkRequest struct {</p>
<p>    Url     string <code>form:&quot;url&quot; binding:&quot;required&quot;</code>      // 长链接（必填）</p>
<p>    Status  int    <code>form:&quot;status&quot; binding:&quot;required&quot;</code>   // 1=自动，2=自定义</p>
<p>    Keyword string <code>form:&quot;keyword&quot;</code>                     // 自定义短码（status=2时必填）</p>
<p>}</p>
<p>// CreateLink 创建短链接的HTTP处理函数</p>
<p>func (b *BaseController) CreateLink(c *gin.Context) {</p>
<p>    var req CreateLinkRequest</p>
<p>    // 解析请求参数</p>
<p>    if err := c.ShouldBind(&amp;req); err != nil {</p>
<p>        Error(c, “参数错误: “+err.Error())</p>
<p>        return</p>
<p>    }</p>
<p>    // 验证：如果是自定义模式，keyword不能为空</p>
<p>    if req.Status <span class="text-highlight"> 2 &amp;&amp; req.Keyword </span> &quot;&quot; {</p>
<p>        Error(c, “自定义模式下，keyword不能为空”)</p>
<p>        return</p>
<p>    }</p>
<p>    // 调用业务逻辑创建短链接</p>
<p>    shortUrl, err := b.shortUrl.CreateLinks(req.Url, req.Keyword, req.Status)</p>
<p>    if err != nil {</p>
<p>        Error(c, err.Error())</p>
<p>        return</p>
<p>    }</p>
<p>    Success(c, shortUrl)</p>
<p>}</p>
<hr/>
<h3 id="步骤9服务器层http服务">步骤9：服务器层（HTTP服务）<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#步骤9服务器层http服务" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>服务器层的代码你已经看到了，这里再完整列出：</p>
<h4 id="91-路由配置serverroutego">9.1 路由配置 server/route.go<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#91-路由配置serverroutego" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>package server</p>
<p>import (</p>
<p>    “short_url/controller”</p>
<p>    “short_url/model/short_url”</p>
<p>    “strings”</p>
<p>    “github.com/gin-contrib/cors”</p>
<p>    “github.com/gin-gonic/gin”</p>
<p>)</p>
<p>func Route(r *gin.Engine) {</p>
<p>    // 配置CORS跨域</p>
<p>    r.Use(cors.New(cors.Config{</p>
<p>        AllowAllOrigins:  true,</p>
<p>        AllowMethods:     []string{”*”},</p>
<p>        AllowHeaders:     []string{“Origin”, “Authorization”, “Access-Control-Allow-Origin”},</p>
<p>        ExposeHeaders:    []string{“Content-Length”, “Access-Control-Allow-Origin”},</p>
<p>        AllowCredentials: true,</p>
<p>    }))</p>
<p>    // 获取控制器</p>
<p>    ctrl, err := controller.GetBaseController()</p>
<p>    if err != nil {</p>
<p>        panic(err)</p>
<p>    }</p>
<p>    // 全局中间件：处理短链接跳转</p>
<p>    r.Use(Middleware)</p>
<p>    // API路由组</p>
<p>    v1 := r.Group(“/v1”)</p>
<p>    {</p>
<p>        v1.POST(“/create_url”, ctrl.CreateLink)  // 创建短链接接口</p>
<p>    }</p>
<p>}</p>
<p>// Middleware 中间件：拦截所有请求，检查是否是短链接访问</p>
<p>func Middleware(c *gin.Context) {</p>
<p>    urlPath := c.Request.URL.Path</p>
<p>    // 如果是API接口，直接放行</p>
<p>    if strings.Contains(urlPath, “create_url”) {</p>
<p>        c.Next()</p>
<p>        return</p>
<p>    }</p>
<p>    // 否则当作短码处理，查询并跳转</p>
<p>    shortCode := strings.ReplaceAll(urlPath, ”/”, &quot;&quot;)</p>
<p>    if shortCode != &quot;&quot; {</p>
<p>        if svc, err := short_url.GetServer(); err == nil {</p>
<p>            if links, err := svc.GetLinksByKeyword(shortCode); err == nil &amp;&amp; links != nil {</p>
<p>                // 301永久重定向到长链接</p>
<p>                c.Redirect(301, links.Url)</p>
<p>                return</p>
<p>            }</p>
<p>        }</p>
<p>    }</p>
<p>    // 找不到对应的短链接，返回404</p>
<p>    c.Status(404)</p>
<p>    c.Abort()</p>
<p>}</p>
<h4 id="92-服务器启动serverservergo">9.2 服务器启动 server/server.go<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#92-服务器启动serverservergo" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<p>package server</p>
<p>import (</p>
<p>    “net/http”</p>
<p>    “short_url/base”</p>
<p>    “short_url/base/tool”</p>
<p>    “time”</p>
<p>    “github.com/gin-gonic/gin”</p>
<p>)</p>
<p>func Run(addr string) {</p>
<p>    base.ServerUrl = addr</p>
<p>    gin.SetMode(gin.ReleaseMode)  // 生产模式</p>
<p>    g := gin.Default()</p>
<p>    Route(g)  // 注册路由</p>
<p>    // 配置HTTP服务器</p>
<p>    s := &amp;http.Server{</p>
<p>        Handler:        g,</p>
<p>        Addr:           addr,</p>
<p>        WriteTimeout:   10 * time.Second,</p>
<p>        ReadTimeout:    10 * time.Second,</p>
<p>        MaxHeaderBytes: 1 &lt;&lt; 20,</p>
<p>    }</p>
<p>    tool.GetLogger().Info(“server start success : ” + addr)</p>
<p>    // 启动服务器</p>
<p>    err := s.ListenAndServe()</p>
<p>    if err != nil {</p>
<p>        panic(err)</p>
<p>    }</p>
<p>}</p>
<hr/>
<h3 id="步骤10主程序入口maingo">步骤10：主程序入口 main.go<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#步骤10主程序入口maingo" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>package main</p>
<p>import (</p>
<p>    “flag”</p>
<p>    “short_url/base”</p>
<p>    “short_url/controller”</p>
<p>    “short_url/server”</p>
<p>)</p>
<p>var path = flag.String(“p”, “./conf/”, “配置文件路径”)</p>
<p>var addr = flag.String(“s”, “127.0.0.1:8099”, “服务器地址”)</p>
<p>func main() {</p>
<p>    flag.Parse()</p>
<p>    // 1. 初始化基础层（配置、数据库、工具）</p>
<p>    base.Init(*path)</p>
<p>    // 2. 初始化控制器</p>
<p>    controller.Init()</p>
<p>    // 3. 启动HTTP服务器</p>
<p>    server.Run(*addr)</p>
<p>}</p>
<hr/>
<h2 id="-步骤11安装依赖并运行">🔧 步骤11：安装依赖并运行<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#-步骤11安装依赖并运行" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="111-创建-gomod切换到agent模式执行">11.1 创建 go.mod（切换到Agent模式执行）<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#111-创建-gomod切换到agent模式执行" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>cd E:\2025-2026\short_url</p>
<p>go mod init short_url</p>
<h3 id="112-安装所有依赖">11.2 安装所有依赖<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#112-安装所有依赖" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>go mod tidy</p>
<p>这个命令会自动下载以下依赖：</p>
<ul>
<li>
<p>github.com/gin-gonic/gin - Web框架</p>
</li>
<li>
<p>github.com/gin-contrib/cors - 跨域中间件</p>
</li>
<li>
<p>github.com/go-xorm/xorm - ORM框架</p>
</li>
<li>
<p>github.com/go-redis/redis - Redis客户端</p>
</li>
<li>
<p>github.com/go-sql-driver/mysql - MySQL驱动</p>
</li>
<li>
<p>gopkg.in/ini.v1 - 配置文件解析</p>
</li>
<li>
<p>go.uber.org/zap - 日志库</p>
</li>
</ul>
<h3 id="113-运行项目">11.3 运行项目<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#113-运行项目" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>go run main.go -p ./conf/ -s 127.0.0.1:8099</p>
<hr/>
<h2 id="-步骤12测试">🧪 步骤12：测试<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#-步骤12测试" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="测试1创建短链接自动生成">测试1：创建短链接（自动生成）<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#测试1创建短链接自动生成" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>curl -X POST <a href="http://127.0.0.1:8099/v1/create_url" class="external">http://127.0.0.1:8099/v1/create_url<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> \</p>
<p>  -F “url=<a href="https://www.google.com" class="external">https://www.google.com<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>” \</p>
<p>  -F “status=1”</p>
<p>响应：</p>
<p>{</p>
<p>  “code”: 200,</p>
<p>  “msg”: “success”,</p>
<p>  “data”: “<a href="http://127.0.0.1:8099/b" class="external">http://127.0.0.1:8099/b<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>”</p>
<p>}</p>
<h3 id="测试2创建短链接自定义">测试2：创建短链接（自定义）<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#测试2创建短链接自定义" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>curl -X POST <a href="http://127.0.0.1:8099/v1/create_url" class="external">http://127.0.0.1:8099/v1/create_url<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a> \</p>
<p>  -F “url=<a href="https://www.baidu.com" class="external">https://www.baidu.com<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>” \</p>
<p>  -F “status=2” \</p>
<p>  -F “keyword=baidu”</p>
<p>响应：</p>
<p>{</p>
<p>  “code”: 200,</p>
<p>  “msg”: “success”,</p>
<p>  “data”: “<a href="http://127.0.0.1:8099/baidu" class="external">http://127.0.0.1:8099/baidu<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a>”</p>
<p>}</p>
<h3 id="测试3访问短链接">测试3：访问短链接<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#测试3访问短链接" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>浏览器打开：<a href="http://127.0.0.1:8099/baidu" class="external">http://127.0.0.1:8099/baidu<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p>
<p>会自动跳转到：<a href="https://www.baidu.com" class="external">https://www.baidu.com<svg aria-hidden="true" class="external-icon" style="max-width:0.8em;max-height:0.8em;" viewBox="0 0 512 512"><path d="M320 0H288V64h32 82.7L201.4 265.4 178.7 288 224 333.3l22.6-22.6L448 109.3V192v32h64V192 32 0H480 320zM32 32H0V64 480v32H32 456h32V480 352 320H424v32 96H64V96h96 32V32H160 32z"></path></svg></a></p></article><hr/><div class="page-footer"><div class="giscus" data-repo="im0x0ing/im0x0ing.github.io" data-repo-id="R_kgDOQevgrA" data-category="Announcements" data-category-id="DIC_kwDOQevgrM4CzLI8" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-input-position="top" data-light-theme="light" data-dark-theme="dark" data-theme-url="https://im0x0ing.github.io/static/giscus" data-lang="zh-CN"></div></div></div><div class="right sidebar"><div class="toc desktop-only"><button type="button" class="toc-header" aria-controls="toc-14" aria-expanded="true"><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div class="toc-depth-control"><span class="depth-label">H3</span><input type="range" class="depth-slider" min="1" max="6" value="2" step="1"/></div><ul id="list-5" class="toc-content overflow"><li class="depth-1"><a href="#-第一阶段核心功能速成-1月2日---1月4日" data-for="-第一阶段核心功能速成-1月2日---1月4日">📅 第一阶段：核心功能速成 (1月2日 - 1月4日)</a></li><li class="depth-2"><a href="#day-1-今晚-1月2日打通血管-config--base" data-for="day-1-今晚-1月2日打通血管-config--base">Day 1 (今晚 1月2日)：打通血管 (Config &amp; Base)</a></li><li class="depth-2"><a href="#day-2-1月3日-周六核心零件-model--logic" data-for="day-2-1月3日-周六核心零件-model--logic">Day 2 (1月3日 周六)：核心零件 (Model &amp; Logic)</a></li><li class="depth-2"><a href="#day-3-1月4日-周日对外营业-controller--server" data-for="day-3-1月4日-周日对外营业-controller--server">Day 3 (1月4日 周日)：对外营业 (Controller &amp; Server)</a></li><li class="depth-1"><a href="#-第二阶段强制熔断--简历投递-1月5日---1月12日" data-for="-第二阶段强制熔断--简历投递-1月5日---1月12日">🛑 第二阶段：强制熔断 &amp; 简历投递 (1月5日 - 1月12日)</a></li><li class="depth-1"><a href="#️-第三阶段补全简历牛皮-1月13日---1月16日" data-for="️-第三阶段补全简历牛皮-1月13日---1月16日">🛠️ 第三阶段：补全“简历牛皮” (1月13日 - 1月16日)</a></li><li class="depth-0"><a href="#具体" data-for="具体">具体</a></li><li class="depth-2"><a href="#65-创建数据库连接basedbmysqlgo" data-for="65-创建数据库连接basedbmysqlgo">6.5 创建数据库连接 base/db/mysql.go</a></li><li class="depth-2"><a href="#66-创建redis连接basedbredisgo" data-for="66-创建redis连接basedbredisgo">6.6 创建Redis连接 base/db/redis.go</a></li><li class="depth-2"><a href="#67-数据库初始化入口basedbdbgo" data-for="67-数据库初始化入口basedbdbgo">6.7 数据库初始化入口 base/db/db.go</a></li><li class="depth-2"><a href="#68-创建进制转换工具basetoolten_to_anygo" data-for="68-创建进制转换工具basetoolten_to_anygo">6.8 创建进制转换工具 base/tool/ten_to_any.go</a></li><li class="depth-2"><a href="#69-创建日志工具basetoolloggo" data-for="69-创建日志工具basetoolloggo">6.9 创建日志工具 base/tool/log.go</a></li><li class="depth-2"><a href="#610-工具初始化basetooltoolgo" data-for="610-工具初始化basetooltoolgo">6.10 工具初始化 base/tool/tool.go</a></li><li class="depth-2"><a href="#611-基础层统一初始化basebasego" data-for="611-基础层统一初始化basebasego">6.11 基础层统一初始化 base/base.go</a></li><li class="depth-1"><a href="#步骤7数据模型层" data-for="步骤7数据模型层">步骤7：数据模型层</a></li><li class="depth-2"><a href="#71-创建links表模型modelshort_urllinksgo" data-for="71-创建links表模型modelshort_urllinksgo">7.1 创建Links表模型 model/short_url/links.go</a></li><li class="depth-2"><a href="#72-创建序列生成器modelsequencegeneratorgo" data-for="72-创建序列生成器modelsequencegeneratorgo">7.2 创建序列生成器 model/sequence/generator.go</a></li><li class="depth-2"><a href="#73-模型层初始化modelmodelgo" data-for="73-模型层初始化modelmodelgo">7.3 模型层初始化 model/model.go</a></li><li class="depth-1"><a href="#步骤8控制器层" data-for="步骤8控制器层">步骤8：控制器层</a></li><li class="depth-2"><a href="#81-创建响应结构controllercodego" data-for="81-创建响应结构controllercodego">8.1 创建响应结构 controller/code.go</a></li><li class="depth-2"><a href="#82-创建短链接控制器controllersequencego" data-for="82-创建短链接控制器controllersequencego">8.2 创建短链接控制器 controller/sequence.go</a></li><li class="depth-1"><a href="#步骤9服务器层http服务" data-for="步骤9服务器层http服务">步骤9：服务器层（HTTP服务）</a></li><li class="depth-2"><a href="#91-路由配置serverroutego" data-for="91-路由配置serverroutego">9.1 路由配置 server/route.go</a></li><li class="depth-2"><a href="#92-服务器启动serverservergo" data-for="92-服务器启动serverservergo">9.2 服务器启动 server/server.go</a></li><li class="depth-1"><a href="#步骤10主程序入口maingo" data-for="步骤10主程序入口maingo">步骤10：主程序入口 main.go</a></li><li class="depth-0"><a href="#-步骤11安装依赖并运行" data-for="-步骤11安装依赖并运行">🔧 步骤11：安装依赖并运行</a></li><li class="depth-1"><a href="#111-创建-gomod切换到agent模式执行" data-for="111-创建-gomod切换到agent模式执行">11.1 创建 go.mod（切换到Agent模式执行）</a></li><li class="depth-1"><a href="#112-安装所有依赖" data-for="112-安装所有依赖">11.2 安装所有依赖</a></li><li class="depth-1"><a href="#113-运行项目" data-for="113-运行项目">11.3 运行项目</a></li><li class="depth-0"><a href="#-步骤12测试" data-for="-步骤12测试">🧪 步骤12：测试</a></li><li class="depth-1"><a href="#测试1创建短链接自动生成" data-for="测试1创建短链接自动生成">测试1：创建短链接（自动生成）</a></li><li class="depth-1"><a href="#测试2创建短链接自定义" data-for="测试2创建短链接自定义">测试2：创建短链接（自定义）</a></li><li class="depth-1"><a href="#测试3访问短链接" data-for="测试3访问短链接">测试3：访问短链接</a></li><li class="overflow-end"></li></ul></div><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div class="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:false,&quot;enableRadial&quot;:false}"></div><button class="global-graph-icon" aria-label="Global Graph"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
                s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
                c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
                C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
                c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
                v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
                s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
                C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
                S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
                s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
                s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></button></div><div class="global-graph-outer"><div class="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.2,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:true,&quot;enableRadial&quot;:true}"></div></div></div></div><footer class><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.5.2</a> © 2026</p><ul><li><a href="https://github.com/jackyzha0/quartz">GitHub</a></li><li><a href="https://discord.gg/cRFFHYye7t">Discord Community</a></li></ul></footer></div></div></body><script type="application/javascript" data-persist="true">function n(){let t=this.parentElement;t.classList.toggle("is-collapsed");let e=t.getElementsByClassName("callout-content")[0];if(!e)return;let l=t.classList.contains("is-collapsed");e.style.gridTemplateRows=l?"0fr":"1fr"}function c(){let t=document.getElementsByClassName("callout is-collapsible");for(let e of t){let l=e.getElementsByClassName("callout-title")[0],s=e.getElementsByClassName("callout-content")[0];if(!l||!s)continue;l.addEventListener("click",n),window.addCleanup(()=>l.removeEventListener("click",n));let o=e.classList.contains("is-collapsed");s.style.gridTemplateRows=o?"0fr":"1fr"}}document.addEventListener("nav",c);
</script><script type="module" data-persist="true">function f(i,e){if(!i)return;function r(o){o.target===this&&(o.preventDefault(),o.stopPropagation(),e())}function t(o){o.key.startsWith("Esc")&&(o.preventDefault(),e())}i?.addEventListener("click",r),window.addCleanup(()=>i?.removeEventListener("click",r)),document.addEventListener("keydown",t),window.addCleanup(()=>document.removeEventListener("keydown",t))}function y(i){for(;i.firstChild;)i.removeChild(i.firstChild)}var h=class{constructor(e,r){this.container=e;this.content=r;this.setupEventListeners(),this.setupNavigationControls(),this.resetTransform()}isDragging=!1;startPan={x:0,y:0};currentPan={x:0,y:0};scale=1;MIN_SCALE=.5;MAX_SCALE=3;cleanups=[];setupEventListeners(){let e=this.onMouseDown.bind(this),r=this.onMouseMove.bind(this),t=this.onMouseUp.bind(this),o=this.resetTransform.bind(this);this.container.addEventListener("mousedown",e),document.addEventListener("mousemove",r),document.addEventListener("mouseup",t),window.addEventListener("resize",o),this.cleanups.push(()=>this.container.removeEventListener("mousedown",e),()=>document.removeEventListener("mousemove",r),()=>document.removeEventListener("mouseup",t),()=>window.removeEventListener("resize",o))}cleanup(){for(let e of this.cleanups)e()}setupNavigationControls(){let e=document.createElement("div");e.className="mermaid-controls";let r=this.createButton("+",()=>this.zoom(.1)),t=this.createButton("-",()=>this.zoom(-.1)),o=this.createButton("Reset",()=>this.resetTransform());e.appendChild(t),e.appendChild(o),e.appendChild(r),this.container.appendChild(e)}createButton(e,r){let t=document.createElement("button");return t.textContent=e,t.className="mermaid-control-button",t.addEventListener("click",r),window.addCleanup(()=>t.removeEventListener("click",r)),t}onMouseDown(e){e.button===0&&(this.isDragging=!0,this.startPan={x:e.clientX-this.currentPan.x,y:e.clientY-this.currentPan.y},this.container.style.cursor="grabbing")}onMouseMove(e){this.isDragging&&(e.preventDefault(),this.currentPan={x:e.clientX-this.startPan.x,y:e.clientY-this.startPan.y},this.updateTransform())}onMouseUp(){this.isDragging=!1,this.container.style.cursor="grab"}zoom(e){let r=Math.min(Math.max(this.scale+e,this.MIN_SCALE),this.MAX_SCALE),t=this.content.getBoundingClientRect(),o=t.width/2,n=t.height/2,c=r-this.scale;this.currentPan.x-=o*c,this.currentPan.y-=n*c,this.scale=r,this.updateTransform()}updateTransform(){this.content.style.transform=`translate(${this.currentPan.x}px, ${this.currentPan.y}px) scale(${this.scale})`}resetTransform(){this.scale=1;let e=this.content.querySelector("svg");this.currentPan={x:e.getBoundingClientRect().width/2,y:e.getBoundingClientRect().height/2},this.updateTransform()}},C=["--secondary","--tertiary","--gray","--light","--lightgray","--highlight","--dark","--darkgray","--codeFont"],E;document.addEventListener("nav",async()=>{let e=document.querySelector(".center").querySelectorAll("code.mermaid");if(e.length===0)return;E||=await import("https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.4.0/mermaid.esm.min.mjs");let r=E.default,t=new WeakMap;for(let n of e)t.set(n,n.innerText);async function o(){for(let s of e){s.removeAttribute("data-processed");let a=t.get(s);a&&(s.innerHTML=a)}let n=C.reduce((s,a)=>(s[a]=window.getComputedStyle(document.documentElement).getPropertyValue(a),s),{}),c=document.documentElement.getAttribute("saved-theme")==="dark";r.initialize({startOnLoad:!1,securityLevel:"loose",theme:c?"dark":"base",themeVariables:{fontFamily:n["--codeFont"],primaryColor:n["--light"],primaryTextColor:n["--darkgray"],primaryBorderColor:n["--tertiary"],lineColor:n["--darkgray"],secondaryColor:n["--secondary"],tertiaryColor:n["--tertiary"],clusterBkg:n["--light"],edgeLabelBackground:n["--highlight"]}}),await r.run({nodes:e})}await o(),document.addEventListener("themechange",o),window.addCleanup(()=>document.removeEventListener("themechange",o));for(let n=0;n<e.length;n++){let v=function(){let g=l.querySelector("#mermaid-space"),m=l.querySelector(".mermaid-content");if(!m)return;y(m);let w=c.querySelector("svg").cloneNode(!0);m.appendChild(w),l.classList.add("active"),g.style.cursor="grab",u=new h(g,m)},M=function(){l.classList.remove("active"),u?.cleanup(),u=null},c=e[n],s=c.parentElement,a=s.querySelector(".clipboard-button"),d=s.querySelector(".expand-button"),p=window.getComputedStyle(a),L=a.offsetWidth+parseFloat(p.marginLeft||"0")+parseFloat(p.marginRight||"0");d.style.right=`calc(${L}px + 0.3rem)`,s.prepend(d);let l=s.querySelector("#mermaid-container");if(!l)return;let u=null;d.addEventListener("click",v),f(l,M),window.addCleanup(()=>{u?.cleanup(),d.removeEventListener("click",v)})}});
</script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/copy-tex.min.js" type="application/javascript" data-persist="true"></script><script src="../../postscript.js" type="module" data-persist="true"></script></html>