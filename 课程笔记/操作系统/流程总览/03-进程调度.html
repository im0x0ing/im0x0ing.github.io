<!DOCTYPE html>
<html lang="en" dir="ltr"><head><title>03 进程调度</title><meta charset="utf-8"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto Sans SC:wght@400;700&amp;family=Noto Serif SC:ital,wght@0,400;0,500;0,700;0,900;1,400;1,500;1,700;1,900&amp;family=JetBrains Mono:wght@400;600&amp;display=swap"/><link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin="anonymous"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="og:site_name" content="ING wiki"/><meta property="og:title" content="03 进程调度"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="03 进程调度"/><meta name="twitter:description" content="进程状态 五种基本状态 进程在运行过程中会经历以下进程状态： New（新建） 进程正在创建过程中 包括申请PCB、分配初始资源等 Ready（就绪） 进程已准备好，等待CPU资源 一旦获得CPU就可以立即执行 Running（运行） 进程正在使用CPU执行 单核系统中同时只有一个进程处于Running状态 多核系统中Running进程数不超过核心数 Waiting（等待） 进程等待某个事件（如I/O完成、信号等） 即使有空余的CPU资源，该进程也无法继续 从Running到Waiting通常是主动的 Terminated（终止） 进程已结束 需要释放资源 状态转换 Ready → Runnin..."/><meta property="og:description" content="进程状态 五种基本状态 进程在运行过程中会经历以下进程状态： New（新建） 进程正在创建过程中 包括申请PCB、分配初始资源等 Ready（就绪） 进程已准备好，等待CPU资源 一旦获得CPU就可以立即执行 Running（运行） 进程正在使用CPU执行 单核系统中同时只有一个进程处于Running状态 多核系统中Running进程数不超过核心数 Waiting（等待） 进程等待某个事件（如I/O完成、信号等） 即使有空余的CPU资源，该进程也无法继续 从Running到Waiting通常是主动的 Terminated（终止） 进程已结束 需要释放资源 状态转换 Ready → Runnin..."/><meta property="og:image:alt" content="进程状态 五种基本状态 进程在运行过程中会经历以下进程状态： New（新建） 进程正在创建过程中 包括申请PCB、分配初始资源等 Ready（就绪） 进程已准备好，等待CPU资源 一旦获得CPU就可以立即执行 Running（运行） 进程正在使用CPU执行 单核系统中同时只有一个进程处于Running状态 多核系统中Running进程数不超过核心数 Waiting（等待） 进程等待某个事件（如I/O完成、信号等） 即使有空余的CPU资源，该进程也无法继续 从Running到Waiting通常是主动的 Terminated（终止） 进程已结束 需要释放资源 状态转换 Ready → Runnin..."/><meta property="twitter:domain" content="im0x0ing.github.io"/><meta property="og:url" content="https://im0x0ing.github.io/课程笔记/操作系统/流程总览/03-进程调度"/><meta property="twitter:url" content="https://im0x0ing.github.io/课程笔记/操作系统/流程总览/03-进程调度"/><link rel="icon" href="../../../static/icon.png"/><meta name="description" content="进程状态 五种基本状态 进程在运行过程中会经历以下进程状态： New（新建） 进程正在创建过程中 包括申请PCB、分配初始资源等 Ready（就绪） 进程已准备好，等待CPU资源 一旦获得CPU就可以立即执行 Running（运行） 进程正在使用CPU执行 单核系统中同时只有一个进程处于Running状态 多核系统中Running进程数不超过核心数 Waiting（等待） 进程等待某个事件（如I/O完成、信号等） 即使有空余的CPU资源，该进程也无法继续 从Running到Waiting通常是主动的 Terminated（终止） 进程已结束 需要释放资源 状态转换 Ready → Runnin..."/><meta name="generator" content="Quartz"/><link href="../../../index.css" rel="stylesheet" type="text/css" data-persist="true"/><style>.expand-button {
  position: absolute;
  display: flex;
  float: right;
  padding: 0.4rem;
  margin: 0.3rem;
  right: 0;
  color: var(--gray);
  border-color: var(--dark);
  background-color: var(--light);
  border: 1px solid;
  border-radius: 5px;
  opacity: 0;
  transition: 0.2s;
}
.expand-button > svg {
  fill: var(--light);
  filter: contrast(0.3);
}
.expand-button:hover {
  cursor: pointer;
  border-color: var(--secondary);
}
.expand-button:focus {
  outline: 0;
}

pre:hover > .expand-button {
  opacity: 1;
  transition: 0.2s;
}

#mermaid-container {
  position: fixed;
  contain: layout;
  z-index: 999;
  left: 0;
  top: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  display: none;
  backdrop-filter: blur(4px);
  background: rgba(0, 0, 0, 0.5);
}
#mermaid-container.active {
  display: inline-block;
}
#mermaid-container > #mermaid-space {
  border: 1px solid var(--lightgray);
  background-color: var(--light);
  border-radius: 5px;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  height: 80vh;
  width: 80vw;
  overflow: hidden;
}
#mermaid-container > #mermaid-space > .mermaid-content {
  padding: 2rem;
  position: relative;
  transform-origin: 0 0;
  transition: transform 0.1s ease;
  overflow: visible;
  min-height: 200px;
  min-width: 200px;
}
#mermaid-container > #mermaid-space > .mermaid-content pre {
  margin: 0;
  border: none;
}
#mermaid-container > #mermaid-space > .mermaid-content svg {
  max-width: none;
  height: auto;
}
#mermaid-container > #mermaid-space > .mermaid-controls {
  position: absolute;
  bottom: 20px;
  right: 20px;
  display: flex;
  gap: 8px;
  padding: 8px;
  background: var(--light);
  border: 1px solid var(--lightgray);
  border-radius: 6px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  z-index: 2;
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  padding: 0;
  border: 1px solid var(--lightgray);
  background: var(--light);
  color: var(--dark);
  border-radius: 4px;
  cursor: pointer;
  font-size: 16px;
  font-family: var(--bodyFont);
  transition: all 0.2s ease;
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:hover {
  background: var(--lightgray);
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:active {
  transform: translateY(1px);
}
#mermaid-container > #mermaid-space > .mermaid-controls .mermaid-control-button:nth-child(2) {
  width: auto;
  padding: 0 12px;
  font-size: 14px;
}
/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VSb290IjoiL2hvbWUvcnVubmVyL3dvcmsvaW0weDBpbmctYmxvZy1wcml2YXRlL2ltMHgwaW5nLWJsb2ctcHJpdmF0ZS9xdWFydHovY29tcG9uZW50cy9zdHlsZXMiLCJzb3VyY2VzIjpbIm1lcm1haWQuaW5saW5lLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7O0FBR0Y7RUFDRTtFQUNBOztBQUdGO0VBQ0U7OztBQUtGO0VBQ0U7RUFDQTs7O0FBSUo7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7O0FBR0Y7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTs7QUFHRjtFQUNFO0VBQ0E7O0FBSUo7RUFDRTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztBQUVBO0VBQ0U7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7QUFFQTtFQUNFOztBQUdGO0VBQ0U7O0FBSUY7RUFDRTtFQUNBO0VBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyIuZXhwYW5kLWJ1dHRvbiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxvYXQ6IHJpZ2h0O1xuICBwYWRkaW5nOiAwLjRyZW07XG4gIG1hcmdpbjogMC4zcmVtO1xuICByaWdodDogMDsgLy8gTk9URTogcmlnaHQgd2lsbCBiZSBzZXQgaW4gbWVybWFpZC5pbmxpbmUudHNcbiAgY29sb3I6IHZhcigtLWdyYXkpO1xuICBib3JkZXItY29sb3I6IHZhcigtLWRhcmspO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1saWdodCk7XG4gIGJvcmRlcjogMXB4IHNvbGlkO1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG4gIG9wYWNpdHk6IDA7XG4gIHRyYW5zaXRpb246IDAuMnM7XG5cbiAgJiA+IHN2ZyB7XG4gICAgZmlsbDogdmFyKC0tbGlnaHQpO1xuICAgIGZpbHRlcjogY29udHJhc3QoMC4zKTtcbiAgfVxuXG4gICY6aG92ZXIge1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBib3JkZXItY29sb3I6IHZhcigtLXNlY29uZGFyeSk7XG4gIH1cblxuICAmOmZvY3VzIHtcbiAgICBvdXRsaW5lOiAwO1xuICB9XG59XG5cbnByZSB7XG4gICY6aG92ZXIgPiAuZXhwYW5kLWJ1dHRvbiB7XG4gICAgb3BhY2l0eTogMTtcbiAgICB0cmFuc2l0aW9uOiAwLjJzO1xuICB9XG59XG5cbiNtZXJtYWlkLWNvbnRhaW5lciB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgY29udGFpbjogbGF5b3V0O1xuICB6LWluZGV4OiA5OTk7XG4gIGxlZnQ6IDA7XG4gIHRvcDogMDtcbiAgd2lkdGg6IDEwMHZ3O1xuICBoZWlnaHQ6IDEwMHZoO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICBkaXNwbGF5OiBub25lO1xuICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoNHB4KTtcbiAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjUpO1xuXG4gICYuYWN0aXZlIHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIH1cblxuICAmID4gI21lcm1haWQtc3BhY2Uge1xuICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWxpZ2h0Z3JheSk7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbGlnaHQpO1xuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcbiAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgdG9wOiA1MCU7XG4gICAgbGVmdDogNTAlO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICAgIGhlaWdodDogODB2aDtcbiAgICB3aWR0aDogODB2dztcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuXG4gICAgJiA+IC5tZXJtYWlkLWNvbnRlbnQge1xuICAgICAgcGFkZGluZzogMnJlbTtcbiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIHRyYW5zZm9ybS1vcmlnaW46IDAgMDtcbiAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjFzIGVhc2U7XG4gICAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgICAgIG1pbi1oZWlnaHQ6IDIwMHB4O1xuICAgICAgbWluLXdpZHRoOiAyMDBweDtcblxuICAgICAgcHJlIHtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICB9XG5cbiAgICAgIHN2ZyB7XG4gICAgICAgIG1heC13aWR0aDogbm9uZTtcbiAgICAgICAgaGVpZ2h0OiBhdXRvO1xuICAgICAgfVxuICAgIH1cblxuICAgICYgPiAubWVybWFpZC1jb250cm9scyB7XG4gICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICBib3R0b206IDIwcHg7XG4gICAgICByaWdodDogMjBweDtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBnYXA6IDhweDtcbiAgICAgIHBhZGRpbmc6IDhweDtcbiAgICAgIGJhY2tncm91bmQ6IHZhcigtLWxpZ2h0KTtcbiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWxpZ2h0Z3JheSk7XG4gICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICBib3gtc2hhZG93OiAwIDJweCA0cHggcmdiYSgwLCAwLCAwLCAwLjEpO1xuICAgICAgei1pbmRleDogMjtcblxuICAgICAgLm1lcm1haWQtY29udHJvbC1idXR0b24ge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgd2lkdGg6IDMycHg7XG4gICAgICAgIGhlaWdodDogMzJweDtcbiAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tbGlnaHRncmF5KTtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tbGlnaHQpO1xuICAgICAgICBjb2xvcjogdmFyKC0tZGFyayk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgICAgIGZvbnQtZmFtaWx5OiB2YXIoLS1ib2R5Rm9udCk7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG5cbiAgICAgICAgJjpob3ZlciB7XG4gICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tbGlnaHRncmF5KTtcbiAgICAgICAgfVxuXG4gICAgICAgICY6YWN0aXZlIHtcbiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMXB4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFN0eWxlIHRoZSByZXNldCBidXR0b24gZGlmZmVyZW50bHlcbiAgICAgICAgJjpudGgtY2hpbGQoMikge1xuICAgICAgICAgIHdpZHRoOiBhdXRvO1xuICAgICAgICAgIHBhZGRpbmc6IDAgMTJweDtcbiAgICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ== */</style><link href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" rel="stylesheet" type="text/css" data-persist="true"/><script src="../../../prescript.js" type="application/javascript" data-persist="true"></script><script type="application/javascript" data-persist="true">const fetchData = fetch("../../../static/contentIndex.json").then(data => data.json())</script><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://im0x0ing.github.io/index.xml"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:image" content="https://im0x0ing.github.io/课程笔记/操作系统/流程总览/03-进程调度-og-image.webp"/><meta property="og:image:url" content="https://im0x0ing.github.io/课程笔记/操作系统/流程总览/03-进程调度-og-image.webp"/><meta name="twitter:image" content="https://im0x0ing.github.io/课程笔记/操作系统/流程总览/03-进程调度-og-image.webp"/><meta property="og:image:type" content="image/.webp"/></head><body data-slug="课程笔记/操作系统/流程总览/03-进程调度"><div id="quartz-root" class="page"><div id="quartz-body"><div class="left sidebar"><h2 class="page-title"><a href="../../..">ING wiki</a></h2><div class="spacer mobile-only"></div><div class="flex-component" style="flex-direction: row; flex-wrap: nowrap; gap: 1rem;"><div style="flex-grow: 1; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><div class="search"><button class="search-button"><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title>Search</title><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"></path><circle cx="8" cy="8" r="7"></circle></g></svg><p>Search</p></button><div class="search-container"><div class="search-space"><input autocomplete="off" class="search-bar" name="search" type="text" aria-label="Search for something" placeholder="Search for something"/><div class="search-layout" data-preview="true"></div></div></div></div></div><div style="flex-grow: 0; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><button class="darkmode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="dayIcon" x="0px" y="0px" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35" xml:space="preserve" aria-label="Dark mode"><title>Dark mode</title><path d="M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="nightIcon" x="0px" y="0px" viewBox="0 0 100 100" style="enable-background:new 0 0 100 100" xml:space="preserve" aria-label="Light mode"><title>Light mode</title><path d="M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"></path></svg></button></div><div style="flex-grow: 0; flex-shrink: 1; flex-basis: auto; order: 0; align-self: center; justify-self: center;"><button class="readermode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="readerIcon" fill="currentColor" stroke="currentColor" stroke-width="0.2" stroke-linecap="round" stroke-linejoin="round" width="64px" height="64px" viewBox="0 0 24 24" aria-label="Reader mode"><title>Reader mode</title><g transform="translate(-1.8, -1.8) scale(1.15, 1.2)"><path d="M8.9891247,2.5 C10.1384702,2.5 11.2209868,2.96705384 12.0049645,3.76669482 C12.7883914,2.96705384 13.8709081,2.5 15.0202536,2.5 L18.7549359,2.5 C19.1691495,2.5 19.5049359,2.83578644 19.5049359,3.25 L19.5046891,4.004 L21.2546891,4.00457396 C21.6343849,4.00457396 21.9481801,4.28672784 21.9978425,4.6528034 L22.0046891,4.75457396 L22.0046891,20.25 C22.0046891,20.6296958 21.7225353,20.943491 21.3564597,20.9931534 L21.2546891,21 L2.75468914,21 C2.37499337,21 2.06119817,20.7178461 2.01153575,20.3517706 L2.00468914,20.25 L2.00468914,4.75457396 C2.00468914,4.37487819 2.28684302,4.061083 2.65291858,4.01142057 L2.75468914,4.00457396 L4.50368914,4.004 L4.50444233,3.25 C4.50444233,2.87030423 4.78659621,2.55650904 5.15267177,2.50684662 L5.25444233,2.5 L8.9891247,2.5 Z M4.50368914,5.504 L3.50468914,5.504 L3.50468914,19.5 L10.9478955,19.4998273 C10.4513189,18.9207296 9.73864328,18.5588115 8.96709342,18.5065584 L8.77307039,18.5 L5.25444233,18.5 C4.87474657,18.5 4.56095137,18.2178461 4.51128895,17.8517706 L4.50444233,17.75 L4.50368914,5.504 Z M19.5049359,17.75 C19.5049359,18.1642136 19.1691495,18.5 18.7549359,18.5 L15.2363079,18.5 C14.3910149,18.5 13.5994408,18.8724714 13.0614828,19.4998273 L20.5046891,19.5 L20.5046891,5.504 L19.5046891,5.504 L19.5049359,17.75 Z M18.0059359,3.999 L15.0202536,4 L14.8259077,4.00692283 C13.9889509,4.06666544 13.2254227,4.50975805 12.7549359,5.212 L12.7549359,17.777 L12.7782651,17.7601316 C13.4923805,17.2719483 14.3447024,17 15.2363079,17 L18.0059359,16.999 L18.0056891,4.798 L18.0033792,4.75457396 L18.0056891,4.71 L18.0059359,3.999 Z M8.9891247,4 L6.00368914,3.999 L6.00599909,4.75457396 L6.00599909,4.75457396 L6.00368914,4.783 L6.00368914,16.999 L8.77307039,17 C9.57551536,17 10.3461406,17.2202781 11.0128313,17.6202194 L11.2536891,17.776 L11.2536891,5.211 C10.8200889,4.56369974 10.1361548,4.13636104 9.37521067,4.02745763 L9.18347055,4.00692283 L8.9891247,4 Z"></path></g></svg></button></div></div><div class="explorer" data-behavior="link" data-collapsed="collapsed" data-savestate="true" data-data-fns="{&quot;order&quot;:[&quot;filter&quot;,&quot;map&quot;,&quot;sort&quot;],&quot;sortFn&quot;:&quot;(a,b)=>!a.isFolder&amp;&amp;!b.isFolder||a.isFolder&amp;&amp;b.isFolder?a.displayName.localeCompare(b.displayName,void 0,{numeric:!0,sensitivity:\&quot;base\&quot;}):!a.isFolder&amp;&amp;b.isFolder?1:-1&quot;,&quot;filterFn&quot;:&quot;node=>node.slug===\&quot;\&quot;||node.slug.startsWith(\&quot;\\u8BFE\\u7A0B\\u7B14\\u8BB0\&quot;)&quot;,&quot;mapFn&quot;:&quot;node=>node&quot;}"><button type="button" class="explorer-toggle mobile-explorer hide-until-loaded" data-mobile="true" aria-controls="explorer-83"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide-menu"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg></button><button type="button" class="title-button explorer-toggle desktop-explorer" data-mobile="false" aria-expanded="true"><h2>Explorer</h2><svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div id="explorer-83" class="explorer-content" aria-expanded="false" role="group"><ul class="explorer-ul overflow" id="list-3"><li class="overflow-end"></li></ul></div><template id="template-file"><li><a href="#"></a></li></template><template id="template-folder"><li><div class="folder-container"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="5 8 14 8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="folder-icon"><polyline points="6 9 12 15 18 9"></polyline></svg><div><button class="folder-button"><span class="folder-title"></span></button></div></div><div class="folder-outer"><ul class="content"></ul></div></li></template></div></div><div class="center"><div class="page-header"><header><nav class="my-navbar "><div class="links"><a href="/课程笔记/">课程笔记</a><a href="/技术积累/">技术积累</a><a href="/工具使用/">工具使用</a><a href="/生活杂谈/">生活杂谈</a></div></nav></header><div class="popover-hint"><nav class="breadcrumb-container" aria-label="breadcrumbs"><div class="breadcrumb-element"><a href="../../../">Home</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../课程笔记/">课程笔记</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../课程笔记/操作系统/">操作系统</a><p> ❯ </p></div><div class="breadcrumb-element"><a href="../../../课程笔记/操作系统/流程总览/">流程总览</a><p> ❯ </p></div><div class="breadcrumb-element"><a href>03 进程调度</a></div></nav><h1 class="article-title">03 进程调度</h1><p show-comma="true" class="content-meta"><time datetime="2025-12-13T07:07:27.000Z">Dec 13, 2025</time><span>10 min read</span></p></div></div><article class="popover-hint"><h2 id="进程状态">进程状态<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#进程状态" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="五种基本状态">五种基本状态<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#五种基本状态" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>进程在运行过程中会经历以下<a href="../../../课程笔记/操作系统/02.2-调度#进程状态state" class="internal alias" data-slug="课程笔记/操作系统/02.2-调度">进程状态</a>：</p>
<p><strong>New（新建）</strong></p>
<ul>
<li>进程正在创建过程中</li>
<li>包括申请PCB、分配初始资源等</li>
</ul>
<p><strong>Ready（就绪）</strong></p>
<ul>
<li>进程已准备好，等待CPU资源</li>
<li>一旦获得CPU就可以立即执行</li>
</ul>
<p><strong>Running（运行）</strong></p>
<ul>
<li>进程正在使用CPU执行</li>
<li>单核系统中同时只有一个进程处于Running状态</li>
<li>多核系统中Running进程数不超过核心数</li>
</ul>
<p><strong>Waiting（等待）</strong></p>
<ul>
<li>进程等待某个事件（如I/O完成、信号等）</li>
<li>即使有空余的CPU资源，该进程也无法继续</li>
<li>从Running到Waiting通常是主动的</li>
</ul>
<p><strong>Terminated（终止）</strong></p>
<ul>
<li>进程已结束</li>
<li>需要释放资源</li>
</ul>
<h3 id="状态转换">状态转换<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#状态转换" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>Ready → Running</strong></p>
<ul>
<li>被调度器选中</li>
<li>获得CPU资源</li>
<li>称为派发（dispatch）</li>
</ul>
<p><strong>Running → Ready</strong></p>
<ul>
<li>时间片用完（<a href="../../../课程笔记/操作系统/01-introduction#计时器-timer" class="internal alias" data-slug="课程笔记/操作系统/01-introduction">timer中断</a>）</li>
<li>被更高优先级进程抢占</li>
<li>从Running到Ready是被动的</li>
</ul>
<p><strong>Running → Waiting</strong></p>
<ul>
<li>主动等待（系统调用、I/O请求）</li>
<li>需要等待某个事件发生</li>
</ul>
<p><strong>Waiting → Ready</strong></p>
<ul>
<li>等待的事件发生（如I/O完成）</li>
<li>被中断唤醒</li>
<li>Waiting不能直接进入Running，必须经过Ready</li>
</ul>
<h2 id="队列管理">队列管理<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#队列管理" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="就绪队列和等待队列">就绪队列和等待队列<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#就绪队列和等待队列" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>参见<a href="../../../课程笔记/操作系统/02.2-调度#就绪队列ready-queue和等待队列wait-queue" class="internal alias" data-slug="课程笔记/操作系统/02.2-调度">就绪队列(ready queue)和等待队列(wait queue)</a></p>
<p><strong>就绪队列（Ready Queue）</strong></p>
<ul>
<li>存放处于Ready状态的进程</li>
<li>实际上是PCB的队列</li>
<li>调度器从就绪队列选择进程执行</li>
</ul>
<p><strong>等待队列（Wait Queue）</strong></p>
<ul>
<li>存放处于Waiting状态的进程</li>
<li>根据等待的事件类型可能有多个等待队列
<ul>
<li>I/O设备等待队列</li>
<li>信号量等待队列</li>
<li>其他事件等待队列</li>
</ul>
</li>
</ul>
<p><strong>队列操作</strong></p>
<ul>
<li>实际上是移动PCB指针在不同队列之间</li>
<li>由内核负责管理</li>
</ul>
<h2 id="调度时机">调度时机<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#调度时机" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="非抢占式调度">非抢占式调度<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#非抢占式调度" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>参见<a href="../../../课程笔记/操作系统/02.2-调度#调度的时机" class="internal alias" data-slug="课程笔记/操作系统/02.2-调度">调度的时机</a></p>
<p><strong>触发条件</strong></p>
<ul>
<li>进程主动释放CPU</li>
<li>进入Waiting状态（系统调用、I/O请求）</li>
<li>进程终止</li>
</ul>
<p><strong>特点</strong></p>
<ul>
<li>进程自愿放弃CPU</li>
<li>调度开销小</li>
<li>响应时间可能较长</li>
</ul>
<h3 id="抢占式调度">抢占式调度<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#抢占式调度" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>参见<a href="../../../课程笔记/操作系统/02.2-调度#调度的时机" class="internal alias" data-slug="课程笔记/操作系统/02.2-调度">调度的时机</a></p>
<p><strong>触发条件</strong></p>
<ul>
<li>时间片用完（<a href="../../../课程笔记/操作系统/01-introduction#计时器-timer" class="internal alias" data-slug="课程笔记/操作系统/01-introduction">timer中断</a>）</li>
<li>更高优先级的进程变为Ready状态</li>
<li>当前进程被中断打断</li>
</ul>
<p><strong>特点</strong></p>
<ul>
<li>强制性调度</li>
<li>调度开销较大</li>
<li>响应时间更短</li>
<li>现代操作系统普遍采用</li>
</ul>
<h2 id="上下文切换">上下文切换<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#上下文切换" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="基本概念">基本概念<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#基本概念" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><a href="../../../课程笔记/操作系统/02.2-调度#调度的过程上下文切换" class="internal alias" data-slug="课程笔记/操作系统/02.2-调度">上下文切换（context switch）</a>是进程切换的核心机制。</p>
<p><strong>上下文包含的内容</strong></p>
<ul>
<li>CPU寄存器的值（通用寄存器、PC、SP等）</li>
<li>进程状态信息</li>
<li>内存管理信息（页表指针等）</li>
</ul>
<h3 id="完整切换流程">完整切换流程<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#完整切换流程" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>当调度器决定切换到另一个进程时：</p>
<h4 id="1-保存当前进程的上下文">1. 保存当前进程的上下文<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#1-保存当前进程的上下文" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<ul>
<li>保存CPU寄存器到当前进程的<a href="../../../课程笔记/操作系统/02.1-进程#process-control-blockpcb" class="internal alias" data-slug="课程笔记/操作系统/02.1-进程">PCB</a>
<ul>
<li>程序计数器（PC）</li>
<li>通用寄存器</li>
<li>栈指针（SP）</li>
</ul>
</li>
<li>保存进程状态</li>
<li>保存内存管理信息</li>
</ul>
<h4 id="2-更新进程状态">2. 更新进程状态<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#2-更新进程状态" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<ul>
<li>将当前进程从Running状态改为Ready或Waiting</li>
<li>将当前进程的PCB移入相应的队列
<ul>
<li>时间片用完 → Ready Queue</li>
<li>等待事件 → Wait Queue</li>
</ul>
</li>
</ul>
<h4 id="3-选择下一个进程">3. 选择下一个进程<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#3-选择下一个进程" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<ul>
<li>调度器从<a href="../../../课程笔记/操作系统/02.2-调度#就绪队列ready-queue和等待队列wait-queue" class="internal alias" data-slug="课程笔记/操作系统/02.2-调度">Ready Queue</a>中选择</li>
<li>根据调度算法决定（参见<a href="../../../课程笔记/操作系统/02.2-调度#调度算法" class="internal alias" data-slug="课程笔记/操作系统/02.2-调度">调度算法</a>）
<ul>
<li>FCFS（First-Come, First-Served）</li>
<li>SJF（Shortest-Job-First）</li>
<li>RR（Round-Robin）</li>
<li>Priority Scheduling</li>
<li>多级队列调度</li>
</ul>
</li>
</ul>
<h4 id="4-恢复下一个进程的上下文">4. 恢复下一个进程的上下文<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#4-恢复下一个进程的上下文" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<ul>
<li>加载新进程的PCB中的寄存器值</li>
<li>恢复CPU状态</li>
</ul>
<p><strong>内存管理操作</strong></p>
<ul>
<li>更新<a href="../../../课程笔记/操作系统/04.1-主存#page-table-in-memory--ptbr" class="internal alias" data-slug="课程笔记/操作系统/04.1-主存">PTBR</a>指向新进程的<a href="../../../课程笔记/操作系统/04.1-主存#分页paging" class="internal alias" data-slug="课程笔记/操作系统/04.1-主存">页表</a></li>
<li>不同进程的虚拟地址空间被隔离</li>
</ul>
<p><strong>TLB管理</strong>（参见<a href="../../../课程笔记/操作系统/04.1-主存#tlb" class="internal alias" data-slug="课程笔记/操作系统/04.1-主存">TLB</a>）</p>
<ul>
<li>方法1：flush TLB（清空所有TLB条目）
<ul>
<li>简单但开销大</li>
<li>下次访问需要重新加载TLB</li>
</ul>
</li>
<li>方法2：使用<a href="../../../课程笔记/操作系统/04.1-主存#tlb-with-asid" class="internal alias" data-slug="课程笔记/操作系统/04.1-主存">ASID（Address-Space Identifier）</a>
<ul>
<li>TLB条目同时存储ASID和page number</li>
<li>切换时不需要清空TLB</li>
<li>减少TLB miss</li>
</ul>
</li>
</ul>
<p><strong>内存保护</strong>（参见<a href="../../../课程笔记/操作系统/04.1-主存#内存保护机制protection" class="internal alias" data-slug="课程笔记/操作系统/04.1-主存">内存保护机制Protection</a>）</p>
<ul>
<li>通过页表的保护位确保进程只能访问自己的虚拟地址空间</li>
<li>valid-invalid bit</li>
<li>读写执行权限位</li>
</ul>
<h4 id="5-切换到新进程">5. 切换到新进程<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#5-切换到新进程" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h4>
<ul>
<li>更新进程状态为Running</li>
<li>设置CPU的mode bit为用户态</li>
<li>跳转到新进程的PC指向的指令继续执行</li>
</ul>
<h3 id="上下文切换的开销">上下文切换的开销<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#上下文切换的开销" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>时间开销</strong></p>
<ul>
<li>保存和恢复寄存器</li>
<li>切换页表</li>
<li>可能需要flush TLB</li>
<li>更新内核数据结构</li>
<li>典型的context switch时间约为10μs</li>
</ul>
<p><strong>性能影响</strong></p>
<ul>
<li>频繁切换会降低系统效率</li>
<li>需要在响应时间和效率之间平衡</li>
</ul>
<h2 id="中断驱动的调度">中断驱动的调度<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#中断驱动的调度" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="中断机制">中断机制<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#中断机制" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>现代操作系统是<a href="../../../课程笔记/操作系统/01-introduction#中断interrupts" class="internal alias" data-slug="课程笔记/操作系统/01-introduction">中断驱动</a>的。</p>
<p><strong>中断的作用</strong></p>
<ul>
<li>提供调度的时机</li>
<li>响应外部事件</li>
<li>处理异常情况</li>
</ul>
<h3 id="timer中断">Timer中断<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#timer中断" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>参见<a href="../../../课程笔记/操作系统/01-introduction#计时器-timer" class="internal alias" data-slug="课程笔记/操作系统/01-introduction">计时器 timer</a></p>
<p><strong>工作流程</strong></p>
<ol>
<li>计时器定期产生中断（如每10ms）</li>
<li>CPU保存当前上下文，跳转到中断处理程序</li>
<li>中断处理程序检查当前进程的时间片是否用完</li>
<li>如果用完，触发调度，将当前进程切换为Ready状态</li>
<li>选择下一个进程执行</li>
</ol>
<p><strong>时间片机制</strong></p>
<ul>
<li>时间片（time quantum）：进程每次运行的最长时间</li>
<li>通常为10~100ms</li>
<li>RR调度算法的核心参数</li>
</ul>
<h3 id="io中断">I/O中断<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#io中断" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>工作流程</strong></p>
<ol>
<li>I/O操作完成时，设备控制器发起<a href="../../../课程笔记/操作系统/01-introduction#中断interrupts" class="internal alias" data-slug="课程笔记/操作系统/01-introduction">中断</a></li>
<li>中断处理程序唤醒等待该I/O的进程</li>
<li>将进程从Waiting状态切换为Ready状态</li>
<li>将进程PCB移入Ready Queue</li>
<li>可能触发调度</li>
</ol>
<h3 id="系统调用">系统调用<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#系统调用" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>参见<a href="../../../课程笔记/操作系统/01-introduction#系统调用" class="internal alias" data-slug="课程笔记/操作系统/01-introduction">系统调用</a></p>
<p><strong>工作流程</strong></p>
<ol>
<li>用户程序调用系统调用</li>
<li>触发软中断（trap）</li>
<li>切换到内核态执行系统调用</li>
<li>如果系统调用需要等待（如read），进程进入Waiting状态</li>
<li>触发调度</li>
</ol>
<h2 id="调度算法简述">调度算法简述<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#调度算法简述" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<p>详见<a href="../../../课程笔记/操作系统/02.2-调度#调度算法" class="internal alias" data-slug="课程笔记/操作系统/02.2-调度">调度算法</a></p>
<h3 id="基本算法">基本算法<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#基本算法" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>FCFS（First-Come, First-Served）</strong></p>
<ul>
<li>先来先服务</li>
<li>非抢占式</li>
<li>简单但可能导致长作业阻塞短作业</li>
</ul>
<p><strong>SJF（Shortest-Job-First）</strong></p>
<ul>
<li>最短作业优先</li>
<li>可以是抢占式或非抢占式</li>
<li>理论上最优，但难以预测运行时间</li>
</ul>
<p><strong>RR（Round-Robin）</strong></p>
<ul>
<li>时间片轮转</li>
<li>抢占式</li>
<li>响应时间好，但平均等待时间可能较长</li>
</ul>
<p><strong>Priority Scheduling</strong></p>
<ul>
<li>优先级调度</li>
<li>可能导致饥饿（starvation）</li>
<li>可通过aging机制解决</li>
</ul>
<h3 id="多级队列调度">多级队列调度<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#多级队列调度" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>参见<a href="../../../课程笔记/操作系统/02.2-调度#multilevel-queue-scheduling" class="internal alias" data-slug="课程笔记/操作系统/02.2-调度">Multilevel Queue Scheduling</a>和<a href="../../../课程笔记/操作系统/02.2-调度#multilevel-feedback-queue-scheduling" class="internal alias" data-slug="课程笔记/操作系统/02.2-调度">Multilevel Feedback Queue Scheduling</a></p>
<p><strong>基本思想</strong></p>
<ul>
<li>将进程分为不同类别</li>
<li>每个类别有自己的队列和调度算法</li>
<li>队列之间也有调度策略</li>
</ul>
<p><strong>多级反馈队列</strong></p>
<ul>
<li>允许进程在队列之间迁移</li>
<li>根据进程行为动态调整优先级</li>
</ul>
<h2 id="线程与调度">线程与调度<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#线程与调度" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<h3 id="线程概念">线程概念<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#线程概念" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p>参见<a href="../../../课程笔记/操作系统/02.3-线程" class="internal alias" data-slug="课程笔记/操作系统/02.3-线程">02.3 线程</a></p>
<p><strong>线程的特点</strong></p>
<ul>
<li>轻量级进程</li>
<li>共享进程的代码、数据、堆</li>
<li>各自维护寄存器、栈、PC</li>
</ul>
<p><strong>线程与进程的关系</strong></p>
<ul>
<li>进程是资源分配的基本单位</li>
<li>线程是CPU调度的基本单位</li>
<li>线程间切换开销小于进程间切换</li>
</ul>
<h3 id="线程调度">线程调度<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#线程调度" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h3>
<p><strong>用户级线程</strong></p>
<ul>
<li>线程库在用户空间实现</li>
<li>对内核透明</li>
<li>一个线程阻塞会导致整个进程阻塞</li>
</ul>
<p><strong>内核级线程</strong></p>
<ul>
<li>内核直接支持线程</li>
<li>可以利用多核并行</li>
<li>一个线程阻塞不影响进程内其他线程</li>
</ul>
<h2 id="相关概念">相关概念<a role="anchor" aria-hidden="true" tabindex="-1" data-no-popover="true" href="#相关概念" class="internal"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></a></h2>
<ul>
<li><a href="../../../课程笔记/操作系统/02.2-调度" class="internal alias" data-slug="课程笔记/操作系统/02.2-调度">02.2 调度</a> - 进程状态、调度算法、上下文切换</li>
<li><a href="../../../课程笔记/操作系统/02.3-线程" class="internal alias" data-slug="课程笔记/操作系统/02.3-线程">02.3 线程</a> - 线程概念、用户级线程、内核级线程</li>
<li><a href="../../../课程笔记/操作系统/01-introduction" class="internal alias" data-slug="课程笔记/操作系统/01-introduction">01 introduction</a> - 中断机制、计时器、系统调用</li>
<li><a href="../../../课程笔记/操作系统/02.1-进程" class="internal alias" data-slug="课程笔记/操作系统/02.1-进程">02.1 进程</a> - PCB、进程创建与终止</li>
<li><a href="../../../课程笔记/操作系统/04.1-主存" class="internal alias" data-slug="课程笔记/操作系统/04.1-主存">04.1 主存</a> - 页表、TLB、内存保护</li>
</ul></article><hr/><div class="page-footer"><div class="giscus" data-repo="im0x0ing/im0x0ing.github.io" data-repo-id="R_kgDOQevgrA" data-category="Announcements" data-category-id="DIC_kwDOQevgrM4CzLI8" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-input-position="top" data-light-theme="light" data-dark-theme="dark" data-theme-url="https://im0x0ing.github.io/static/giscus" data-lang="zh-CN"></div></div></div><div class="right sidebar"><div class="toc desktop-only"><button type="button" class="toc-header" aria-controls="toc-35" aria-expanded="true"><h3>Table of Contents</h3><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="fold"><polyline points="6 9 12 15 18 9"></polyline></svg></button><div class="toc-depth-control"><span class="depth-label">H3</span><input type="range" class="depth-slider" min="1" max="6" value="2" step="1"/></div><ul id="list-9" class="toc-content overflow"><li class="depth-0"><a href="#进程状态" data-for="进程状态">进程状态</a></li><li class="depth-1"><a href="#五种基本状态" data-for="五种基本状态">五种基本状态</a></li><li class="depth-1"><a href="#状态转换" data-for="状态转换">状态转换</a></li><li class="depth-0"><a href="#队列管理" data-for="队列管理">队列管理</a></li><li class="depth-1"><a href="#就绪队列和等待队列" data-for="就绪队列和等待队列">就绪队列和等待队列</a></li><li class="depth-0"><a href="#调度时机" data-for="调度时机">调度时机</a></li><li class="depth-1"><a href="#非抢占式调度" data-for="非抢占式调度">非抢占式调度</a></li><li class="depth-1"><a href="#抢占式调度" data-for="抢占式调度">抢占式调度</a></li><li class="depth-0"><a href="#上下文切换" data-for="上下文切换">上下文切换</a></li><li class="depth-1"><a href="#基本概念" data-for="基本概念">基本概念</a></li><li class="depth-1"><a href="#完整切换流程" data-for="完整切换流程">完整切换流程</a></li><li class="depth-2"><a href="#1-保存当前进程的上下文" data-for="1-保存当前进程的上下文">1. 保存当前进程的上下文</a></li><li class="depth-2"><a href="#2-更新进程状态" data-for="2-更新进程状态">2. 更新进程状态</a></li><li class="depth-2"><a href="#3-选择下一个进程" data-for="3-选择下一个进程">3. 选择下一个进程</a></li><li class="depth-2"><a href="#4-恢复下一个进程的上下文" data-for="4-恢复下一个进程的上下文">4. 恢复下一个进程的上下文</a></li><li class="depth-2"><a href="#5-切换到新进程" data-for="5-切换到新进程">5. 切换到新进程</a></li><li class="depth-1"><a href="#上下文切换的开销" data-for="上下文切换的开销">上下文切换的开销</a></li><li class="depth-0"><a href="#中断驱动的调度" data-for="中断驱动的调度">中断驱动的调度</a></li><li class="depth-1"><a href="#中断机制" data-for="中断机制">中断机制</a></li><li class="depth-1"><a href="#timer中断" data-for="timer中断">Timer中断</a></li><li class="depth-1"><a href="#io中断" data-for="io中断">I/O中断</a></li><li class="depth-1"><a href="#系统调用" data-for="系统调用">系统调用</a></li><li class="depth-0"><a href="#调度算法简述" data-for="调度算法简述">调度算法简述</a></li><li class="depth-1"><a href="#基本算法" data-for="基本算法">基本算法</a></li><li class="depth-1"><a href="#多级队列调度" data-for="多级队列调度">多级队列调度</a></li><li class="depth-0"><a href="#线程与调度" data-for="线程与调度">线程与调度</a></li><li class="depth-1"><a href="#线程概念" data-for="线程概念">线程概念</a></li><li class="depth-1"><a href="#线程调度" data-for="线程调度">线程调度</a></li><li class="depth-0"><a href="#相关概念" data-for="相关概念">相关概念</a></li><li class="overflow-end"></li></ul></div><div class="graph"><h3>Graph View</h3><div class="graph-outer"><div class="graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:1,&quot;scale&quot;:1.1,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.3,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:false,&quot;enableRadial&quot;:false}"></div><button class="global-graph-icon" aria-label="Global Graph"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 55 55" fill="currentColor" xml:space="preserve"><path d="M49,0c-3.309,0-6,2.691-6,6c0,1.035,0.263,2.009,0.726,2.86l-9.829,9.829C32.542,17.634,30.846,17,29,17
                s-3.542,0.634-4.898,1.688l-7.669-7.669C16.785,10.424,17,9.74,17,9c0-2.206-1.794-4-4-4S9,6.794,9,9s1.794,4,4,4
                c0.74,0,1.424-0.215,2.019-0.567l7.669,7.669C21.634,21.458,21,23.154,21,25s0.634,3.542,1.688,4.897L10.024,42.562
                C8.958,41.595,7.549,41,6,41c-3.309,0-6,2.691-6,6s2.691,6,6,6s6-2.691,6-6c0-1.035-0.263-2.009-0.726-2.86l12.829-12.829
                c1.106,0.86,2.44,1.436,3.898,1.619v10.16c-2.833,0.478-5,2.942-5,5.91c0,3.309,2.691,6,6,6s6-2.691,6-6c0-2.967-2.167-5.431-5-5.91
                v-10.16c1.458-0.183,2.792-0.759,3.898-1.619l7.669,7.669C41.215,39.576,41,40.26,41,41c0,2.206,1.794,4,4,4s4-1.794,4-4
                s-1.794-4-4-4c-0.74,0-1.424,0.215-2.019,0.567l-7.669-7.669C36.366,28.542,37,26.846,37,25s-0.634-3.542-1.688-4.897l9.665-9.665
                C46.042,11.405,47.451,12,49,12c3.309,0,6-2.691,6-6S52.309,0,49,0z M11,9c0-1.103,0.897-2,2-2s2,0.897,2,2s-0.897,2-2,2
                S11,10.103,11,9z M6,51c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S8.206,51,6,51z M33,49c0,2.206-1.794,4-4,4s-4-1.794-4-4
                s1.794-4,4-4S33,46.794,33,49z M29,31c-3.309,0-6-2.691-6-6s2.691-6,6-6s6,2.691,6,6S32.309,31,29,31z M47,41c0,1.103-0.897,2-2,2
                s-2-0.897-2-2s0.897-2,2-2S47,39.897,47,41z M49,10c-2.206,0-4-1.794-4-4s1.794-4,4-4s4,1.794,4,4S51.206,10,49,10z"></path></svg></button></div><div class="global-graph-outer"><div class="global-graph-container" data-cfg="{&quot;drag&quot;:true,&quot;zoom&quot;:true,&quot;depth&quot;:-1,&quot;scale&quot;:0.9,&quot;repelForce&quot;:0.5,&quot;centerForce&quot;:0.2,&quot;linkDistance&quot;:30,&quot;fontSize&quot;:0.6,&quot;opacityScale&quot;:1,&quot;showTags&quot;:true,&quot;removeTags&quot;:[],&quot;focusOnHover&quot;:true,&quot;enableRadial&quot;:true}"></div></div></div></div><footer class><p>Created with <a href="https://quartz.jzhao.xyz/">Quartz v4.5.2</a> © 2025</p><ul><li><a href="https://github.com/jackyzha0/quartz">GitHub</a></li><li><a href="https://discord.gg/cRFFHYye7t">Discord Community</a></li></ul></footer></div></div></body><script type="application/javascript" data-persist="true">function n(){let t=this.parentElement;t.classList.toggle("is-collapsed");let e=t.getElementsByClassName("callout-content")[0];if(!e)return;let l=t.classList.contains("is-collapsed");e.style.gridTemplateRows=l?"0fr":"1fr"}function c(){let t=document.getElementsByClassName("callout is-collapsible");for(let e of t){let l=e.getElementsByClassName("callout-title")[0],s=e.getElementsByClassName("callout-content")[0];if(!l||!s)continue;l.addEventListener("click",n),window.addCleanup(()=>l.removeEventListener("click",n));let o=e.classList.contains("is-collapsed");s.style.gridTemplateRows=o?"0fr":"1fr"}}document.addEventListener("nav",c);
</script><script type="module" data-persist="true">function f(i,e){if(!i)return;function r(o){o.target===this&&(o.preventDefault(),o.stopPropagation(),e())}function t(o){o.key.startsWith("Esc")&&(o.preventDefault(),e())}i?.addEventListener("click",r),window.addCleanup(()=>i?.removeEventListener("click",r)),document.addEventListener("keydown",t),window.addCleanup(()=>document.removeEventListener("keydown",t))}function y(i){for(;i.firstChild;)i.removeChild(i.firstChild)}var h=class{constructor(e,r){this.container=e;this.content=r;this.setupEventListeners(),this.setupNavigationControls(),this.resetTransform()}isDragging=!1;startPan={x:0,y:0};currentPan={x:0,y:0};scale=1;MIN_SCALE=.5;MAX_SCALE=3;cleanups=[];setupEventListeners(){let e=this.onMouseDown.bind(this),r=this.onMouseMove.bind(this),t=this.onMouseUp.bind(this),o=this.resetTransform.bind(this);this.container.addEventListener("mousedown",e),document.addEventListener("mousemove",r),document.addEventListener("mouseup",t),window.addEventListener("resize",o),this.cleanups.push(()=>this.container.removeEventListener("mousedown",e),()=>document.removeEventListener("mousemove",r),()=>document.removeEventListener("mouseup",t),()=>window.removeEventListener("resize",o))}cleanup(){for(let e of this.cleanups)e()}setupNavigationControls(){let e=document.createElement("div");e.className="mermaid-controls";let r=this.createButton("+",()=>this.zoom(.1)),t=this.createButton("-",()=>this.zoom(-.1)),o=this.createButton("Reset",()=>this.resetTransform());e.appendChild(t),e.appendChild(o),e.appendChild(r),this.container.appendChild(e)}createButton(e,r){let t=document.createElement("button");return t.textContent=e,t.className="mermaid-control-button",t.addEventListener("click",r),window.addCleanup(()=>t.removeEventListener("click",r)),t}onMouseDown(e){e.button===0&&(this.isDragging=!0,this.startPan={x:e.clientX-this.currentPan.x,y:e.clientY-this.currentPan.y},this.container.style.cursor="grabbing")}onMouseMove(e){this.isDragging&&(e.preventDefault(),this.currentPan={x:e.clientX-this.startPan.x,y:e.clientY-this.startPan.y},this.updateTransform())}onMouseUp(){this.isDragging=!1,this.container.style.cursor="grab"}zoom(e){let r=Math.min(Math.max(this.scale+e,this.MIN_SCALE),this.MAX_SCALE),t=this.content.getBoundingClientRect(),o=t.width/2,n=t.height/2,c=r-this.scale;this.currentPan.x-=o*c,this.currentPan.y-=n*c,this.scale=r,this.updateTransform()}updateTransform(){this.content.style.transform=`translate(${this.currentPan.x}px, ${this.currentPan.y}px) scale(${this.scale})`}resetTransform(){this.scale=1;let e=this.content.querySelector("svg");this.currentPan={x:e.getBoundingClientRect().width/2,y:e.getBoundingClientRect().height/2},this.updateTransform()}},C=["--secondary","--tertiary","--gray","--light","--lightgray","--highlight","--dark","--darkgray","--codeFont"],E;document.addEventListener("nav",async()=>{let e=document.querySelector(".center").querySelectorAll("code.mermaid");if(e.length===0)return;E||=await import("https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.4.0/mermaid.esm.min.mjs");let r=E.default,t=new WeakMap;for(let n of e)t.set(n,n.innerText);async function o(){for(let s of e){s.removeAttribute("data-processed");let a=t.get(s);a&&(s.innerHTML=a)}let n=C.reduce((s,a)=>(s[a]=window.getComputedStyle(document.documentElement).getPropertyValue(a),s),{}),c=document.documentElement.getAttribute("saved-theme")==="dark";r.initialize({startOnLoad:!1,securityLevel:"loose",theme:c?"dark":"base",themeVariables:{fontFamily:n["--codeFont"],primaryColor:n["--light"],primaryTextColor:n["--darkgray"],primaryBorderColor:n["--tertiary"],lineColor:n["--darkgray"],secondaryColor:n["--secondary"],tertiaryColor:n["--tertiary"],clusterBkg:n["--light"],edgeLabelBackground:n["--highlight"]}}),await r.run({nodes:e})}await o(),document.addEventListener("themechange",o),window.addCleanup(()=>document.removeEventListener("themechange",o));for(let n=0;n<e.length;n++){let v=function(){let g=l.querySelector("#mermaid-space"),m=l.querySelector(".mermaid-content");if(!m)return;y(m);let w=c.querySelector("svg").cloneNode(!0);m.appendChild(w),l.classList.add("active"),g.style.cursor="grab",u=new h(g,m)},M=function(){l.classList.remove("active"),u?.cleanup(),u=null},c=e[n],s=c.parentElement,a=s.querySelector(".clipboard-button"),d=s.querySelector(".expand-button"),p=window.getComputedStyle(a),L=a.offsetWidth+parseFloat(p.marginLeft||"0")+parseFloat(p.marginRight||"0");d.style.right=`calc(${L}px + 0.3rem)`,s.prepend(d);let l=s.querySelector("#mermaid-container");if(!l)return;let u=null;d.addEventListener("click",v),f(l,M),window.addCleanup(()=>{u?.cleanup(),d.removeEventListener("click",v)})}});
</script><script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/copy-tex.min.js" type="application/javascript" data-persist="true"></script><script src="../../../postscript.js" type="module" data-persist="true"></script></html>